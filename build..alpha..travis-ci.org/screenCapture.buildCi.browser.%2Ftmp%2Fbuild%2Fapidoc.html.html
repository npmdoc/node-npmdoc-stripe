<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/stripe/stripe-node">stripe (v4.18.0)</a>
</h1>
<h4>Stripe API wrapper</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe">module stripe</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts">
            function <span class="apidocSignatureSpan">stripe.</span>Accounts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplePayDomains">
            function <span class="apidocSignatureSpan">stripe.</span>ApplePayDomains
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFeeRefunds">
            function <span class="apidocSignatureSpan">stripe.</span>ApplicationFeeRefunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees">
            function <span class="apidocSignatureSpan">stripe.</span>ApplicationFees
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance">
            function <span class="apidocSignatureSpan">stripe.</span>Balance
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.BitcoinReceivers">
            function <span class="apidocSignatureSpan">stripe.</span>BitcoinReceivers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ChargeRefunds">
            function <span class="apidocSignatureSpan">stripe.</span>ChargeRefunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges">
            function <span class="apidocSignatureSpan">stripe.</span>Charges
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CountrySpecs">
            function <span class="apidocSignatureSpan">stripe.</span>CountrySpecs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Coupons">
            function <span class="apidocSignatureSpan">stripe.</span>Coupons
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerCards">
            function <span class="apidocSignatureSpan">stripe.</span>CustomerCards
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerSubscriptions">
            function <span class="apidocSignatureSpan">stripe.</span>CustomerSubscriptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers">
            function <span class="apidocSignatureSpan">stripe.</span>Customers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Disputes">
            function <span class="apidocSignatureSpan">stripe.</span>Disputes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error">
            function <span class="apidocSignatureSpan">stripe.</span>Error
            <span class="apidocSignatureSpan">(raw)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Events">
            function <span class="apidocSignatureSpan">stripe.</span>Events
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.FileUploads">
            function <span class="apidocSignatureSpan">stripe.</span>FileUploads
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.InvoiceItems">
            function <span class="apidocSignatureSpan">stripe.</span>InvoiceItems
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices">
            function <span class="apidocSignatureSpan">stripe.</span>Invoices
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.OrderReturns">
            function <span class="apidocSignatureSpan">stripe.</span>OrderReturns
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders">
            function <span class="apidocSignatureSpan">stripe.</span>Orders
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Payouts">
            function <span class="apidocSignatureSpan">stripe.</span>Payouts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Plans">
            function <span class="apidocSignatureSpan">stripe.</span>Plans
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Products">
            function <span class="apidocSignatureSpan">stripe.</span>Products
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.RecipientCards">
            function <span class="apidocSignatureSpan">stripe.</span>RecipientCards
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients">
            function <span class="apidocSignatureSpan">stripe.</span>Recipients
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Refunds">
            function <span class="apidocSignatureSpan">stripe.</span>Refunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SKUs">
            function <span class="apidocSignatureSpan">stripe.</span>SKUs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Sources">
            function <span class="apidocSignatureSpan">stripe.</span>Sources
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource">
            function <span class="apidocSignatureSpan">stripe.</span>StripeResource
            <span class="apidocSignatureSpan">(stripe, urlData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SubscriptionItems">
            function <span class="apidocSignatureSpan">stripe.</span>SubscriptionItems
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions">
            function <span class="apidocSignatureSpan">stripe.</span>Subscriptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ThreeDSecure">
            function <span class="apidocSignatureSpan">stripe.</span>ThreeDSecure
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Tokens">
            function <span class="apidocSignatureSpan">stripe.</span>Tokens
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.TransferReversals">
            function <span class="apidocSignatureSpan">stripe.</span>TransferReversals
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers">
            function <span class="apidocSignatureSpan">stripe.</span>Transfers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Accounts.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>ApplicationFees.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Balance.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>BitcoinReceivers.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Charges.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>CustomerSubscriptions.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Customers.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Disputes.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Error.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>FileUploads.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Invoices.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Orders.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Payouts.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Products.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Recipients.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>SKUs.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Sources.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>StripeMethod_basic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>StripeResource.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Subscriptions.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>Transfers.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Accounts">module stripe.Accounts</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.Accounts">
            function <span class="apidocSignatureSpan">stripe.</span>Accounts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.extend">
            function <span class="apidocSignatureSpan">stripe.Accounts.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.method">
            function <span class="apidocSignatureSpan">stripe.Accounts.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Accounts.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Accounts.prototype">module stripe.Accounts.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.create">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.createExternalAccount">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>createExternalAccount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.del">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>del
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.deleteExternalAccount">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>deleteExternalAccount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.list">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>list
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.listExternalAccounts">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>listExternalAccounts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.reject">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>reject
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.retrieve">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>retrieve
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.retrieveExternalAccount">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>retrieveExternalAccount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.update">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>update
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Accounts.prototype.updateExternalAccount">
            function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>updateExternalAccount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.ApplePayDomains">module stripe.ApplePayDomains</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplePayDomains.ApplePayDomains">
            function <span class="apidocSignatureSpan">stripe.</span>ApplePayDomains
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplePayDomains.extend">
            function <span class="apidocSignatureSpan">stripe.ApplePayDomains.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplePayDomains.method">
            function <span class="apidocSignatureSpan">stripe.ApplePayDomains.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.ApplePayDomains.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.ApplicationFeeRefunds">module stripe.ApplicationFeeRefunds</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFeeRefunds.ApplicationFeeRefunds">
            function <span class="apidocSignatureSpan">stripe.</span>ApplicationFeeRefunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFeeRefunds.extend">
            function <span class="apidocSignatureSpan">stripe.ApplicationFeeRefunds.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFeeRefunds.method">
            function <span class="apidocSignatureSpan">stripe.ApplicationFeeRefunds.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.ApplicationFeeRefunds.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.ApplicationFees">module stripe.ApplicationFees</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.ApplicationFees">
            function <span class="apidocSignatureSpan">stripe.</span>ApplicationFees
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.extend">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.method">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.ApplicationFees.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.ApplicationFees.prototype">module stripe.ApplicationFees.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.prototype.createRefund">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>createRefund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.prototype.listRefunds">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>listRefunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.prototype.refund">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>refund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.prototype.retrieveRefund">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>retrieveRefund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ApplicationFees.prototype.updateRefund">
            function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>updateRefund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Balance">module stripe.Balance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance.Balance">
            function <span class="apidocSignatureSpan">stripe.</span>Balance
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance.extend">
            function <span class="apidocSignatureSpan">stripe.Balance.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance.method">
            function <span class="apidocSignatureSpan">stripe.Balance.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Balance.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Balance.prototype">module stripe.Balance.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance.prototype.listTransactions">
            function <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>listTransactions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance.prototype.retrieve">
            function <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>retrieve
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Balance.prototype.retrieveTransaction">
            function <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>retrieveTransaction
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.BitcoinReceivers">module stripe.BitcoinReceivers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.BitcoinReceivers.BitcoinReceivers">
            function <span class="apidocSignatureSpan">stripe.</span>BitcoinReceivers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.BitcoinReceivers.extend">
            function <span class="apidocSignatureSpan">stripe.BitcoinReceivers.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.BitcoinReceivers.method">
            function <span class="apidocSignatureSpan">stripe.BitcoinReceivers.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.BitcoinReceivers.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.BitcoinReceivers.prototype">module stripe.BitcoinReceivers.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.BitcoinReceivers.prototype.listTransactions">
            function <span class="apidocSignatureSpan">stripe.BitcoinReceivers.prototype.</span>listTransactions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.BitcoinReceivers.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.BitcoinReceivers.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.ChargeRefunds">module stripe.ChargeRefunds</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ChargeRefunds.ChargeRefunds">
            function <span class="apidocSignatureSpan">stripe.</span>ChargeRefunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ChargeRefunds.extend">
            function <span class="apidocSignatureSpan">stripe.ChargeRefunds.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ChargeRefunds.method">
            function <span class="apidocSignatureSpan">stripe.ChargeRefunds.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.ChargeRefunds.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Charges">module stripe.Charges</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.Charges">
            function <span class="apidocSignatureSpan">stripe.</span>Charges
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.extend">
            function <span class="apidocSignatureSpan">stripe.Charges.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.method">
            function <span class="apidocSignatureSpan">stripe.Charges.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Charges.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Charges.prototype">module stripe.Charges.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.capture">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>capture
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.closeDispute">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>closeDispute
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.createRefund">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>createRefund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.listRefunds">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>listRefunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.markAsFraudulent">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>markAsFraudulent
            <span class="apidocSignatureSpan">(chargeId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.markAsSafe">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>markAsSafe
            <span class="apidocSignatureSpan">(chargeId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.refund">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>refund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.retrieveRefund">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>retrieveRefund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.updateDispute">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>updateDispute
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Charges.prototype.updateRefund">
            function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>updateRefund
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.CountrySpecs">module stripe.CountrySpecs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CountrySpecs.CountrySpecs">
            function <span class="apidocSignatureSpan">stripe.</span>CountrySpecs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CountrySpecs.extend">
            function <span class="apidocSignatureSpan">stripe.CountrySpecs.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CountrySpecs.method">
            function <span class="apidocSignatureSpan">stripe.CountrySpecs.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.CountrySpecs.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Coupons">module stripe.Coupons</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Coupons.Coupons">
            function <span class="apidocSignatureSpan">stripe.</span>Coupons
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Coupons.extend">
            function <span class="apidocSignatureSpan">stripe.Coupons.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Coupons.method">
            function <span class="apidocSignatureSpan">stripe.Coupons.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Coupons.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.CustomerCards">module stripe.CustomerCards</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerCards.CustomerCards">
            function <span class="apidocSignatureSpan">stripe.</span>CustomerCards
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerCards.extend">
            function <span class="apidocSignatureSpan">stripe.CustomerCards.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerCards.method">
            function <span class="apidocSignatureSpan">stripe.CustomerCards.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.CustomerCards.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.CustomerSubscriptions">module stripe.CustomerSubscriptions</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerSubscriptions.CustomerSubscriptions">
            function <span class="apidocSignatureSpan">stripe.</span>CustomerSubscriptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerSubscriptions.extend">
            function <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerSubscriptions.method">
            function <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.CustomerSubscriptions.prototype">module stripe.CustomerSubscriptions.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.CustomerSubscriptions.prototype.deleteDiscount">
            function <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.prototype.</span>deleteDiscount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Customers">module stripe.Customers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.Customers">
            function <span class="apidocSignatureSpan">stripe.</span>Customers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.extend">
            function <span class="apidocSignatureSpan">stripe.Customers.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.method">
            function <span class="apidocSignatureSpan">stripe.Customers.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Customers.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Customers.prototype">module stripe.Customers.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype._legacyCancelSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_legacyCancelSubscription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype._legacyUpdateSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_legacyUpdateSubscription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype._newstyleCancelSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_newstyleCancelSubscription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype._newstyleUpdateSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_newstyleUpdateSubscription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.cancelSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>cancelSubscription
            <span class="apidocSignatureSpan">(customerId, subscriptionId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.createCard">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>createCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.createSource">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>createSource
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.createSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>createSubscription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.deleteCard">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.deleteDiscount">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteDiscount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.deleteSource">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteSource
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.deleteSubscriptionDiscount">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteSubscriptionDiscount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.listCards">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>listCards
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.listSources">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>listSources
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.listSubscriptions">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>listSubscriptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.retrieveCard">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>retrieveCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.retrieveSource">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>retrieveSource
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.retrieveSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>retrieveSubscription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.updateCard">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>updateCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.updateSource">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>updateSource
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.updateSubscription">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>updateSubscription
            <span class="apidocSignatureSpan">(customerId, subscriptionId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Customers.prototype.verifySource">
            function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>verifySource
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Disputes">module stripe.Disputes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Disputes.Disputes">
            function <span class="apidocSignatureSpan">stripe.</span>Disputes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Disputes.extend">
            function <span class="apidocSignatureSpan">stripe.Disputes.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Disputes.method">
            function <span class="apidocSignatureSpan">stripe.Disputes.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Disputes.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Disputes.prototype">module stripe.Disputes.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Disputes.prototype.close">
            function <span class="apidocSignatureSpan">stripe.Disputes.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Disputes.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Disputes.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Error">module stripe.Error</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.Error">
            function <span class="apidocSignatureSpan">stripe.</span>Error
            <span class="apidocSignatureSpan">(raw)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeAPIError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeAPIError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeAuthenticationError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeAuthenticationError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeCardError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeCardError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeConnectionError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeConnectionError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeInvalidRequestError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeInvalidRequestError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripePermissionError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripePermissionError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.StripeRateLimitError">
            function <span class="apidocSignatureSpan">stripe.Error.</span>StripeRateLimitError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.extend">
            function <span class="apidocSignatureSpan">stripe.Error.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Error.prototype">module stripe.Error.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Error.prototype.populate">
            function <span class="apidocSignatureSpan">stripe.Error.prototype.</span>populate
            <span class="apidocSignatureSpan">(type, message)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Error.prototype.</span>type</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Events">module stripe.Events</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Events.Events">
            function <span class="apidocSignatureSpan">stripe.</span>Events
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Events.extend">
            function <span class="apidocSignatureSpan">stripe.Events.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Events.method">
            function <span class="apidocSignatureSpan">stripe.Events.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Events.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.FileUploads">module stripe.FileUploads</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.FileUploads.FileUploads">
            function <span class="apidocSignatureSpan">stripe.</span>FileUploads
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.FileUploads.extend">
            function <span class="apidocSignatureSpan">stripe.FileUploads.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.FileUploads.method">
            function <span class="apidocSignatureSpan">stripe.FileUploads.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.FileUploads.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.FileUploads.prototype">module stripe.FileUploads.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.FileUploads.prototype.create">
            function <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.FileUploads.prototype.requestDataProcessor">
            function <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>requestDataProcessor
            <span class="apidocSignatureSpan">(method, data, headers)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>overrideHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.InvoiceItems">module stripe.InvoiceItems</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.InvoiceItems.InvoiceItems">
            function <span class="apidocSignatureSpan">stripe.</span>InvoiceItems
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.InvoiceItems.extend">
            function <span class="apidocSignatureSpan">stripe.InvoiceItems.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.InvoiceItems.method">
            function <span class="apidocSignatureSpan">stripe.InvoiceItems.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.InvoiceItems.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Invoices">module stripe.Invoices</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices.Invoices">
            function <span class="apidocSignatureSpan">stripe.</span>Invoices
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices.extend">
            function <span class="apidocSignatureSpan">stripe.Invoices.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices.method">
            function <span class="apidocSignatureSpan">stripe.Invoices.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Invoices.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Invoices.prototype">module stripe.Invoices.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices.prototype.pay">
            function <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>pay
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices.prototype.retrieveLines">
            function <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>retrieveLines
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Invoices.prototype.retrieveUpcoming">
            function <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>retrieveUpcoming
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.OrderReturns">module stripe.OrderReturns</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.OrderReturns.OrderReturns">
            function <span class="apidocSignatureSpan">stripe.</span>OrderReturns
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.OrderReturns.extend">
            function <span class="apidocSignatureSpan">stripe.OrderReturns.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.OrderReturns.method">
            function <span class="apidocSignatureSpan">stripe.OrderReturns.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.OrderReturns.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Orders">module stripe.Orders</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders.Orders">
            function <span class="apidocSignatureSpan">stripe.</span>Orders
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders.extend">
            function <span class="apidocSignatureSpan">stripe.Orders.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders.method">
            function <span class="apidocSignatureSpan">stripe.Orders.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Orders.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Orders.prototype">module stripe.Orders.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders.prototype.create">
            function <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders.prototype.pay">
            function <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>pay
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Orders.prototype.returnOrder">
            function <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>returnOrder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Payouts">module stripe.Payouts</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Payouts.Payouts">
            function <span class="apidocSignatureSpan">stripe.</span>Payouts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Payouts.extend">
            function <span class="apidocSignatureSpan">stripe.Payouts.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Payouts.method">
            function <span class="apidocSignatureSpan">stripe.Payouts.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Payouts.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Payouts.prototype">module stripe.Payouts.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Payouts.prototype.cancel">
            function <span class="apidocSignatureSpan">stripe.Payouts.prototype.</span>cancel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Payouts.prototype.listTransactions">
            function <span class="apidocSignatureSpan">stripe.Payouts.prototype.</span>listTransactions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Payouts.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Payouts.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Plans">module stripe.Plans</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Plans.Plans">
            function <span class="apidocSignatureSpan">stripe.</span>Plans
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Plans.extend">
            function <span class="apidocSignatureSpan">stripe.Plans.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Plans.method">
            function <span class="apidocSignatureSpan">stripe.Plans.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Plans.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Products">module stripe.Products</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Products.Products">
            function <span class="apidocSignatureSpan">stripe.</span>Products
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Products.extend">
            function <span class="apidocSignatureSpan">stripe.Products.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Products.method">
            function <span class="apidocSignatureSpan">stripe.Products.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Products.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Products.prototype">module stripe.Products.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Products.prototype.create">
            function <span class="apidocSignatureSpan">stripe.Products.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Products.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Products.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.RecipientCards">module stripe.RecipientCards</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.RecipientCards.RecipientCards">
            function <span class="apidocSignatureSpan">stripe.</span>RecipientCards
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.RecipientCards.extend">
            function <span class="apidocSignatureSpan">stripe.RecipientCards.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.RecipientCards.method">
            function <span class="apidocSignatureSpan">stripe.RecipientCards.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.RecipientCards.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Recipients">module stripe.Recipients</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.Recipients">
            function <span class="apidocSignatureSpan">stripe.</span>Recipients
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.extend">
            function <span class="apidocSignatureSpan">stripe.Recipients.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.method">
            function <span class="apidocSignatureSpan">stripe.Recipients.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Recipients.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Recipients.prototype">module stripe.Recipients.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.prototype.createCard">
            function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>createCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.prototype.deleteCard">
            function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>deleteCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.prototype.listCards">
            function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>listCards
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.prototype.retrieveCard">
            function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>retrieveCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Recipients.prototype.updateCard">
            function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>updateCard
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Refunds">module stripe.Refunds</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Refunds.Refunds">
            function <span class="apidocSignatureSpan">stripe.</span>Refunds
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Refunds.extend">
            function <span class="apidocSignatureSpan">stripe.Refunds.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Refunds.method">
            function <span class="apidocSignatureSpan">stripe.Refunds.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Refunds.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.SKUs">module stripe.SKUs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SKUs.SKUs">
            function <span class="apidocSignatureSpan">stripe.</span>SKUs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SKUs.extend">
            function <span class="apidocSignatureSpan">stripe.SKUs.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SKUs.method">
            function <span class="apidocSignatureSpan">stripe.SKUs.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.SKUs.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.SKUs.prototype">module stripe.SKUs.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SKUs.prototype.create">
            function <span class="apidocSignatureSpan">stripe.SKUs.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.SKUs.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.SKUs.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Sources">module stripe.Sources</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Sources.Sources">
            function <span class="apidocSignatureSpan">stripe.</span>Sources
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Sources.extend">
            function <span class="apidocSignatureSpan">stripe.Sources.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Sources.method">
            function <span class="apidocSignatureSpan">stripe.Sources.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Sources.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Sources.prototype">module stripe.Sources.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Sources.prototype.verify">
            function <span class="apidocSignatureSpan">stripe.Sources.prototype.</span>verify
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Sources.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Sources.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.StripeMethod_basic">module stripe.StripeMethod_basic</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.create">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.del">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>del
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.getMetadata">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>getMetadata
            <span class="apidocSignatureSpan">(id, auth, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.list">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>list
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.retrieve">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>retrieve
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.setMetadata">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>setMetadata
            <span class="apidocSignatureSpan">(id, key, value, auth, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeMethod_basic.update">
            function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>update
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.StripeResource">module stripe.StripeResource</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.StripeResource">
            function <span class="apidocSignatureSpan">stripe.</span>StripeResource
            <span class="apidocSignatureSpan">(stripe, urlData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.extend">
            function <span class="apidocSignatureSpan">stripe.StripeResource.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.method">
            function <span class="apidocSignatureSpan">stripe.StripeResource.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.StripeResource.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.StripeResource.prototype">module stripe.StripeResource.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype._errorHandler">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_errorHandler
            <span class="apidocSignatureSpan">(req, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype._request">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_request
            <span class="apidocSignatureSpan">(method, path, data, auth, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype._responseHandler">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_responseHandler
            <span class="apidocSignatureSpan">(req, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype._timeoutHandler">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_timeoutHandler
            <span class="apidocSignatureSpan">(timeout, req, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype.createFullPath">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>createFullPath
            <span class="apidocSignatureSpan">(commandPath, urlData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype.createResourcePathWithSymbols">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>createResourcePathWithSymbols
            <span class="apidocSignatureSpan">(pathWithSymbols)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype.createUrlData">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>createUrlData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype.initialize">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>initialize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.StripeResource.prototype.wrapTimeout">
            function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>wrapTimeout
            <span class="apidocSignatureSpan">(promise, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>overrideHost</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>requestDataProcessor</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.SubscriptionItems">module stripe.SubscriptionItems</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SubscriptionItems.SubscriptionItems">
            function <span class="apidocSignatureSpan">stripe.</span>SubscriptionItems
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SubscriptionItems.extend">
            function <span class="apidocSignatureSpan">stripe.SubscriptionItems.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.SubscriptionItems.method">
            function <span class="apidocSignatureSpan">stripe.SubscriptionItems.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.SubscriptionItems.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Subscriptions">module stripe.Subscriptions</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions.Subscriptions">
            function <span class="apidocSignatureSpan">stripe.</span>Subscriptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions.extend">
            function <span class="apidocSignatureSpan">stripe.Subscriptions.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions.method">
            function <span class="apidocSignatureSpan">stripe.Subscriptions.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Subscriptions.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Subscriptions.prototype">module stripe.Subscriptions.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions.prototype.create">
            function <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions.prototype.deleteDiscount">
            function <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>deleteDiscount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Subscriptions.prototype.update">
            function <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>update
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.ThreeDSecure">module stripe.ThreeDSecure</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ThreeDSecure.ThreeDSecure">
            function <span class="apidocSignatureSpan">stripe.</span>ThreeDSecure
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ThreeDSecure.extend">
            function <span class="apidocSignatureSpan">stripe.ThreeDSecure.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.ThreeDSecure.method">
            function <span class="apidocSignatureSpan">stripe.ThreeDSecure.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.ThreeDSecure.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Tokens">module stripe.Tokens</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Tokens.Tokens">
            function <span class="apidocSignatureSpan">stripe.</span>Tokens
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Tokens.extend">
            function <span class="apidocSignatureSpan">stripe.Tokens.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Tokens.method">
            function <span class="apidocSignatureSpan">stripe.Tokens.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Tokens.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.TransferReversals">module stripe.TransferReversals</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.TransferReversals.TransferReversals">
            function <span class="apidocSignatureSpan">stripe.</span>TransferReversals
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.TransferReversals.extend">
            function <span class="apidocSignatureSpan">stripe.TransferReversals.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.TransferReversals.method">
            function <span class="apidocSignatureSpan">stripe.TransferReversals.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.TransferReversals.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Transfers">module stripe.Transfers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.Transfers">
            function <span class="apidocSignatureSpan">stripe.</span>Transfers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.extend">
            function <span class="apidocSignatureSpan">stripe.Transfers.</span>extend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.method">
            function <span class="apidocSignatureSpan">stripe.Transfers.</span>method
            <span class="apidocSignatureSpan">(spec)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Transfers.</span>BASIC_METHODS</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.Transfers.prototype">module stripe.Transfers.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.cancel">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>cancel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.createReversal">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>createReversal
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.listReversals">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>listReversals
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.listTransactions">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>listTransactions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.retrieveReversal">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>retrieveReversal
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.reverse">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>reverse
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.Transfers.prototype.updateReversal">
            function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>updateReversal
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>includeBasic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stripe.utils">module stripe.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.arrayToObject">
            function <span class="apidocSignatureSpan">stripe.utils.</span>arrayToObject
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.getDataFromArgs">
            function <span class="apidocSignatureSpan">stripe.utils.</span>getDataFromArgs
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.getOptionsFromArgs">
            function <span class="apidocSignatureSpan">stripe.utils.</span>getOptionsFromArgs
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.isAuthKey">
            function <span class="apidocSignatureSpan">stripe.utils.</span>isAuthKey
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.isOptionsHash">
            function <span class="apidocSignatureSpan">stripe.utils.</span>isOptionsHash
            <span class="apidocSignatureSpan">(o)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.makeURLInterpolator">
            function <span class="apidocSignatureSpan">stripe.utils.</span>makeURLInterpolator
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.protoExtend">
            function <span class="apidocSignatureSpan">stripe.utils.</span>protoExtend
            <span class="apidocSignatureSpan">(sub)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stripe.utils.stringifyRequestData">
            function <span class="apidocSignatureSpan">stripe.utils.</span>stringifyRequestData
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe" id="apidoc.module.stripe">module stripe</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Accounts" id="apidoc.element.stripe.Accounts">
        function <span class="apidocSignatureSpan">stripe.</span>Accounts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Accounts = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplePayDomains" id="apidoc.element.stripe.ApplePayDomains">
        function <span class="apidocSignatureSpan">stripe.</span>ApplePayDomains
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplePayDomains = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFeeRefunds" id="apidoc.element.stripe.ApplicationFeeRefunds">
        function <span class="apidocSignatureSpan">stripe.</span>ApplicationFeeRefunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationFeeRefunds = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var APPFEE_TEST_ID = 'appFeeIdTest999';
var REFUND_TEST_ID = 'refundIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var appFeeRefund = new resources.<span class="apidocCodeKeywordSpan">ApplicationFeeRefunds</span>(
    stripe,
    {feeId: APPFEE_TEST_ID}
);

// Use spy from existing resource:
appFeeRefund._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees" id="apidoc.element.stripe.ApplicationFees">
        function <span class="apidocSignatureSpan">stripe.</span>ApplicationFees
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationFees = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Balance" id="apidoc.element.stripe.Balance">
        function <span class="apidocSignatureSpan">stripe.</span>Balance
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Balance = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.BitcoinReceivers" id="apidoc.element.stripe.BitcoinReceivers">
        function <span class="apidocSignatureSpan">stripe.</span>BitcoinReceivers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">BitcoinReceivers = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ChargeRefunds" id="apidoc.element.stripe.ChargeRefunds">
        function <span class="apidocSignatureSpan">stripe.</span>ChargeRefunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ChargeRefunds = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var CHARGE_TEST_ID = 'chargeIdTest999';
var REFUND_TEST_ID = 'refundIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var chargeRefund = new resources.<span class="apidocCodeKeywordSpan">ChargeRefunds</span>(
  stripe,
  {chargeId: CHARGE_TEST_ID}
);

// Use spy from existing resource:
chargeRefund._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges" id="apidoc.element.stripe.Charges">
        function <span class="apidocSignatureSpan">stripe.</span>Charges
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Charges = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CountrySpecs" id="apidoc.element.stripe.CountrySpecs">
        function <span class="apidocSignatureSpan">stripe.</span>CountrySpecs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">CountrySpecs = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Coupons" id="apidoc.element.stripe.Coupons">
        function <span class="apidocSignatureSpan">stripe.</span>Coupons
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Coupons = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CustomerCards" id="apidoc.element.stripe.CustomerCards">
        function <span class="apidocSignatureSpan">stripe.</span>CustomerCards
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">CustomerCards = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var resources = require('../../lib/stripe').resources;
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var CUSTOMER_TEST_ID = 'customerIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var customerCard = new resources.<span class="apidocCodeKeywordSpan">CustomerCards</span>(
  stripe,
  {customerId: CUSTOMER_TEST_ID}
);

// Use spy from existing resource:
customerCard._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CustomerSubscriptions" id="apidoc.element.stripe.CustomerSubscriptions">
        function <span class="apidocSignatureSpan">stripe.</span>CustomerSubscriptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">CustomerSubscriptions = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var resources = require('../../lib/stripe').resources;
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var CUSTOMER_TEST_ID = 'customerIdTest999';

// Create new CustomerSubscription instance with pre-filled customerId:
var customerSubscription = new resources.<span class="apidocCodeKeywordSpan">CustomerSubscriptions</span>(
    stripe,
    {customerId: CUSTOMER_TEST_ID}
);

// Use spy from existing resource:
customerSubscription._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers" id="apidoc.element.stripe.Customers">
        function <span class="apidocSignatureSpan">stripe.</span>Customers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Customers = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Disputes" id="apidoc.element.stripe.Disputes">
        function <span class="apidocSignatureSpan">stripe.</span>Disputes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Disputes = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error" id="apidoc.element.stripe.Error">
        function <span class="apidocSignatureSpan">stripe.</span>Error
        <span class="apidocSignatureSpan">(raw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _Error(raw) {
  this.populate.apply(this, arguments);
  this.stack = (new Error(this.message)).stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Events" id="apidoc.element.stripe.Events">
        function <span class="apidocSignatureSpan">stripe.</span>Events
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Events = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.FileUploads" id="apidoc.element.stripe.FileUploads">
        function <span class="apidocSignatureSpan">stripe.</span>FileUploads
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">FileUploads = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.InvoiceItems" id="apidoc.element.stripe.InvoiceItems">
        function <span class="apidocSignatureSpan">stripe.</span>InvoiceItems
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">InvoiceItems = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Invoices" id="apidoc.element.stripe.Invoices">
        function <span class="apidocSignatureSpan">stripe.</span>Invoices
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Invoices = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.OrderReturns" id="apidoc.element.stripe.OrderReturns">
        function <span class="apidocSignatureSpan">stripe.</span>OrderReturns
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">OrderReturns = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Orders" id="apidoc.element.stripe.Orders">
        function <span class="apidocSignatureSpan">stripe.</span>Orders
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Orders = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Payouts" id="apidoc.element.stripe.Payouts">
        function <span class="apidocSignatureSpan">stripe.</span>Payouts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Payouts = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Plans" id="apidoc.element.stripe.Plans">
        function <span class="apidocSignatureSpan">stripe.</span>Plans
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Plans = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Products" id="apidoc.element.stripe.Products">
        function <span class="apidocSignatureSpan">stripe.</span>Products
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Products = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.RecipientCards" id="apidoc.element.stripe.RecipientCards">
        function <span class="apidocSignatureSpan">stripe.</span>RecipientCards
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">RecipientCards = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var resources = require('../../lib/stripe').resources;
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var RECIPIENT_TEST_ID = 'recipientIdTest999';

// Create new recipientCard instance with pre-filled recipientId:
var recipientCard = new resources.<span class="apidocCodeKeywordSpan">RecipientCards</span>(
  stripe,
  {recipientId: RECIPIENT_TEST_ID}
);

// Use spy from existing resource:
recipientCard._request = stripe.recipients._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients" id="apidoc.element.stripe.Recipients">
        function <span class="apidocSignatureSpan">stripe.</span>Recipients
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Recipients = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Refunds" id="apidoc.element.stripe.Refunds">
        function <span class="apidocSignatureSpan">stripe.</span>Refunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Refunds = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.SKUs" id="apidoc.element.stripe.SKUs">
        function <span class="apidocSignatureSpan">stripe.</span>SKUs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">SKUs = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Sources" id="apidoc.element.stripe.Sources">
        function <span class="apidocSignatureSpan">stripe.</span>Sources
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Sources = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource" id="apidoc.element.stripe.StripeResource">
        function <span class="apidocSignatureSpan">stripe.</span>StripeResource
        <span class="apidocSignatureSpan">(stripe, urlData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StripeResource(stripe, urlData) {
  this._stripe = stripe;
  this._urlData = urlData || {};

  this.basePath = utils.makeURLInterpolator(stripe.getApiField('basePath'));
  this.resourcePath = this.path;
  this.path = utils.makeURLInterpolator(this.path);

  if (this.includeBasic) {
    this.includeBasic.forEach(function(methodName) {
      this[methodName] = StripeResource.BASIC_METHODS[methodName];
    }, this);
  }

  this.initialize.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.SubscriptionItems" id="apidoc.element.stripe.SubscriptionItems">
        function <span class="apidocSignatureSpan">stripe.</span>SubscriptionItems
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">SubscriptionItems = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Subscriptions" id="apidoc.element.stripe.Subscriptions">
        function <span class="apidocSignatureSpan">stripe.</span>Subscriptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Subscriptions = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ThreeDSecure" id="apidoc.element.stripe.ThreeDSecure">
        function <span class="apidocSignatureSpan">stripe.</span>ThreeDSecure
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ThreeDSecure = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Tokens" id="apidoc.element.stripe.Tokens">
        function <span class="apidocSignatureSpan">stripe.</span>Tokens
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Tokens = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.TransferReversals" id="apidoc.element.stripe.TransferReversals">
        function <span class="apidocSignatureSpan">stripe.</span>TransferReversals
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">TransferReversals = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var TRANSFER_TEST_ID = 'transferIdTest999';
var REVERSAL_TEST_ID = 'reversalIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var transferReversal = new resources.<span class="apidocCodeKeywordSpan">TransferReversals</span>(
  stripe,
  {transferId: TRANSFER_TEST_ID}
);

// Use spy from existing resource:
transferReversal._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers" id="apidoc.element.stripe.Transfers">
        function <span class="apidocSignatureSpan">stripe.</span>Transfers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Transfers = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>














































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Accounts" id="apidoc.module.stripe.Accounts">module stripe.Accounts</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Accounts.Accounts" id="apidoc.element.stripe.Accounts.Accounts">
        function <span class="apidocSignatureSpan">stripe.</span>Accounts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Accounts = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.extend" id="apidoc.element.stripe.Accounts.extend">
        function <span class="apidocSignatureSpan">stripe.Accounts.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.method" id="apidoc.element.stripe.Accounts.method">
        function <span class="apidocSignatureSpan">stripe.Accounts.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Accounts.prototype" id="apidoc.module.stripe.Accounts.prototype">module stripe.Accounts.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.create" id="apidoc.element.stripe.Accounts.prototype.create">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.createExternalAccount" id="apidoc.element.stripe.Accounts.prototype.createExternalAccount">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>createExternalAccount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createExternalAccount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('createExternalAccount', function() {
  it('Sends the correct request', function() {
    stripe.account.<span class="apidocCodeKeywordSpan">createExternalAccount</span>('accountIdFoo321', {
      number: '123456', currency: 'usd', country: 'US',
    });
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/accounts/accountIdFoo321/external_accounts',
      headers: {},
      data: {number: '123456', currency: 'usd', country: 'US'},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.del" id="apidoc.element.stripe.Accounts.prototype.del">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>del
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
},
add: function(fn) {
  this._cleanupFns.push(fn);
},
deleteCustomer: function(custId) {
  this.add(function() {
    return this._stripe.customers.<span class="apidocCodeKeywordSpan">del</span>(custId);
  });
},
deletePlan: function(pId) {
  this.add(function() {
    return this._stripe.plans.del(pId);
  });
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.deleteExternalAccount" id="apidoc.element.stripe.Accounts.prototype.deleteExternalAccount">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>deleteExternalAccount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteExternalAccount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {default_for_currency: true},
    });
  });
});

describe('deleteExternalAccount', function() {
  it('Sends the correct request', function() {
    stripe.account.<span class="apidocCodeKeywordSpan">deleteExternalAccount</span>('accountIdFoo321', 'externalAccountIdFoo456
');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'DELETE',
      url: '/v1/accounts/accountIdFoo321/external_accounts/externalAccountIdFoo456',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.list" id="apidoc.element.stripe.Accounts.prototype.list">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>list
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      },
    });
  });
});

describe('list', function() {
  it('Sends the correct request', function() {
    stripe.applePayDomains.<span class="apidocCodeKeywordSpan">list</span>();
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/apple_pay/domains',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.listExternalAccounts" id="apidoc.element.stripe.Accounts.prototype.listExternalAccounts">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>listExternalAccounts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listExternalAccounts = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('listExternalAccounts', function() {
  it('Sends the correct request', function() {
    stripe.account.<span class="apidocCodeKeywordSpan">listExternalAccounts</span>('accountIdFoo321');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/accounts/accountIdFoo321/external_accounts',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.reject" id="apidoc.element.stripe.Accounts.prototype.reject">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>reject
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reject = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('reject', function() {
  it('rejects an account successfully', function() {
    stripe.account.<span class="apidocCodeKeywordSpan">reject</span>('acct_16Tzq6DBahdM4C8s', {reason: 'fraud'
;});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/accounts/acct_16Tzq6DBahdM4C8s/reject',
      data: {reason: 'fraud'},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.retrieve" id="apidoc.element.stripe.Accounts.prototype.retrieve">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>retrieve
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieve = function (id) {
  // No longer allow an api key to be passed as the first string to this function due to ambiguity between
  // old account ids and api keys. To request the account for an api key, send null as the id
  if (typeof id === 'string') {
    return stripeMethod({
      method: 'GET',
      path: 'accounts/{id}',
      urlParams: ['id'],
    }).apply(this, arguments);
  } else {
    if (id === null || id === undefined) {
      // Remove id as stripeMethod would complain of unexpected argument
      [].shift.apply(arguments);
    }
    return stripeMethod({
      method: 'GET',
      path: 'account',
    }).apply(this, arguments);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Configuring For Connect

A per-request `Stripe-Account` header for use with [Stripe Connect][connect]
can be added to any method:

``` js
// Retrieve the balance for a connected account:
stripe.balance.<span class="apidocCodeKeywordSpan">retrieve</span>({
  stripe_account: "acct_foo"
}).then(function(balance) {
  // The balance object for the connected account
}).catch(function(err) {
  // Error
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.retrieveExternalAccount" id="apidoc.element.stripe.Accounts.prototype.retrieveExternalAccount">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>retrieveExternalAccount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveExternalAccount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  });
});

describe('External account methods', function() {
  describe('retrieveExternalAccount', function() {
    it('Sends the correct request', function() {
      stripe.account.<span class="apidocCodeKeywordSpan">retrieveExternalAccount</span>('accountIdFoo321', 'externalAccountIdFoo456
');
      expect(stripe.LAST_REQUEST).to.deep.equal({
        method: 'GET',
        url: '/v1/accounts/accountIdFoo321/external_accounts/externalAccountIdFoo456',
        headers: {},
        data: {},
      });
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.update" id="apidoc.element.stripe.Accounts.prototype.update">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>update
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      customer = joined[1];
    })
  ).to.not.be.eventually.rejected;
});
describe('And I apply the coupon to the customer', function() {
  it('Does so', function() {
    return expect(
      stripe.customers.<span class="apidocCodeKeywordSpan">update</span>(customer.id, {
        coupon: coupon.id,
      })
    ).to.not.be.eventually.rejected;
  });
  it('Can be retrieved from that customer', function() {
    return expect(
      stripe.customers.retrieve(customer.id)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Accounts.prototype.updateExternalAccount" id="apidoc.element.stripe.Accounts.prototype.updateExternalAccount">
        function <span class="apidocSignatureSpan">stripe.Accounts.prototype.</span>updateExternalAccount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateExternalAccount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('updateExternalAccount', function() {
  it('Sends the correct request', function() {
    stripe.account.<span class="apidocCodeKeywordSpan">updateExternalAccount</span>('accountIdFoo321', 'externalAccountIdFoo456
', {
      default_for_currency: true,
    });
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/accounts/accountIdFoo321/external_accounts/externalAccountIdFoo456',
      headers: {},
      data: {default_for_currency: true},
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.ApplePayDomains" id="apidoc.module.stripe.ApplePayDomains">module stripe.ApplePayDomains</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.ApplePayDomains.ApplePayDomains" id="apidoc.element.stripe.ApplePayDomains.ApplePayDomains">
        function <span class="apidocSignatureSpan">stripe.</span>ApplePayDomains
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplePayDomains = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplePayDomains.extend" id="apidoc.element.stripe.ApplePayDomains.extend">
        function <span class="apidocSignatureSpan">stripe.ApplePayDomains.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplePayDomains.method" id="apidoc.element.stripe.ApplePayDomains.method">
        function <span class="apidocSignatureSpan">stripe.ApplePayDomains.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.ApplicationFeeRefunds" id="apidoc.module.stripe.ApplicationFeeRefunds">module stripe.ApplicationFeeRefunds</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.ApplicationFeeRefunds.ApplicationFeeRefunds" id="apidoc.element.stripe.ApplicationFeeRefunds.ApplicationFeeRefunds">
        function <span class="apidocSignatureSpan">stripe.</span>ApplicationFeeRefunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationFeeRefunds = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var APPFEE_TEST_ID = 'appFeeIdTest999';
var REFUND_TEST_ID = 'refundIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var appFeeRefund = new resources.<span class="apidocCodeKeywordSpan">ApplicationFeeRefunds</span>(
    stripe,
    {feeId: APPFEE_TEST_ID}
);

// Use spy from existing resource:
appFeeRefund._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFeeRefunds.extend" id="apidoc.element.stripe.ApplicationFeeRefunds.extend">
        function <span class="apidocSignatureSpan">stripe.ApplicationFeeRefunds.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFeeRefunds.method" id="apidoc.element.stripe.ApplicationFeeRefunds.method">
        function <span class="apidocSignatureSpan">stripe.ApplicationFeeRefunds.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.ApplicationFees" id="apidoc.module.stripe.ApplicationFees">module stripe.ApplicationFees</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.ApplicationFees" id="apidoc.element.stripe.ApplicationFees.ApplicationFees">
        function <span class="apidocSignatureSpan">stripe.</span>ApplicationFees
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationFees = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.extend" id="apidoc.element.stripe.ApplicationFees.extend">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.method" id="apidoc.element.stripe.ApplicationFees.method">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.ApplicationFees.prototype" id="apidoc.module.stripe.ApplicationFees.prototype">module stripe.ApplicationFees.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.prototype.createRefund" id="apidoc.element.stripe.ApplicationFees.prototype.createRefund">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>createRefund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createRefund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    url: '/v1/application_fees/appFeeIdExample3242/refunds/refundIdExample2312',
    data: {metadata: {key: 'value'}},
    headers: {},
  });
});

it('Sends the correct create request', function() {
  stripe.applicationFees.<span class="apidocCodeKeywordSpan">createRefund</span>(
    'appFeeIdExample3242',
    {amount: 100}
  );
  expect(stripe.LAST_REQUEST).to.deep.equal({
    method: 'POST',
    url: '/v1/application_fees/appFeeIdExample3242/refunds',
    data: {amount: 100},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.prototype.listRefunds" id="apidoc.element.stripe.ApplicationFees.prototype.listRefunds">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>listRefunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listRefunds = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    url: '/v1/application_fees/appFeeIdExample3242/refunds',
    data: {amount: 100},
    headers: {},
  });
});

it('Sends the correct list request', function() {
  stripe.applicationFees.<span class="apidocCodeKeywordSpan">listRefunds</span>(
    'appFeeIdExample3242'
  );
  expect(stripe.LAST_REQUEST).to.deep.equal({
    method: 'GET',
    url: '/v1/application_fees/appFeeIdExample3242/refunds',
    data: {},
    headers: {},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.prototype.refund" id="apidoc.element.stripe.ApplicationFees.prototype.refund">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>refund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">refund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('refund', function() {
  it('Sends the correct request', function() {
    stripe.applicationFees.<span class="apidocCodeKeywordSpan">refund</span>('applicationFeeIdExample3242', {amount: 23
});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/application_fees/applicationFeeIdExample3242/refund',
      data: {amount: 23},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.prototype.retrieveRefund" id="apidoc.element.stripe.ApplicationFees.prototype.retrieveRefund">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>retrieveRefund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveRefund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * requires an application fee id , and therefore each of its methods only
 * require the refundId argument.
 *
 * This streamlines the API specifically for the case of accessing refunds
 * on a returned application fee object.
 *
 * E.g. applicationFeeObject.refunds.retrieve(refundId)
 * (As opposed to the also-supported stripe.applicationFees.<span class="apidocCodeKeywordSpan">retrieveRefund</span>(chargeId,
 * refundId))
 */
module.exports = StripeResource.extend({
  path: 'application_fees/{feeId}/refunds',
  includeBasic: ['create', 'list', 'retrieve', 'update'],
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ApplicationFees.prototype.updateRefund" id="apidoc.element.stripe.ApplicationFees.prototype.updateRefund">
        function <span class="apidocSignatureSpan">stripe.ApplicationFees.prototype.</span>updateRefund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateRefund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('refunds', function() {
  it('Sends the correct update request', function() {
    stripe.applicationFees.<span class="apidocCodeKeywordSpan">updateRefund</span>(
      'appFeeIdExample3242',
      'refundIdExample2312',
      {metadata: {key: 'value'}}
    );
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/application_fees/appFeeIdExample3242/refunds/refundIdExample2312',
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Balance" id="apidoc.module.stripe.Balance">module stripe.Balance</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Balance.Balance" id="apidoc.element.stripe.Balance.Balance">
        function <span class="apidocSignatureSpan">stripe.</span>Balance
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Balance = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Balance.extend" id="apidoc.element.stripe.Balance.extend">
        function <span class="apidocSignatureSpan">stripe.Balance.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Balance.method" id="apidoc.element.stripe.Balance.method">
        function <span class="apidocSignatureSpan">stripe.Balance.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Balance.prototype" id="apidoc.module.stripe.Balance.prototype">module stripe.Balance.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Balance.prototype.listTransactions" id="apidoc.element.stripe.Balance.prototype.listTransactions">
        function <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>listTransactions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listTransactions = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('listTransactions', function() {
  it('Sends the correct request', function() {
    stripe.balance.<span class="apidocCodeKeywordSpan">listTransactions</span>();
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/balance/history',
      data: {},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Balance.prototype.retrieve" id="apidoc.element.stripe.Balance.prototype.retrieve">
        function <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>retrieve
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieve = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Configuring For Connect

A per-request `Stripe-Account` header for use with [Stripe Connect][connect]
can be added to any method:

``` js
// Retrieve the balance for a connected account:
stripe.balance.<span class="apidocCodeKeywordSpan">retrieve</span>({
  stripe_account: "acct_foo"
}).then(function(balance) {
  // The balance object for the connected account
}).catch(function(err) {
  // Error
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Balance.prototype.retrieveTransaction" id="apidoc.element.stripe.Balance.prototype.retrieveTransaction">
        function <span class="apidocSignatureSpan">stripe.Balance.prototype.</span>retrieveTransaction
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveTransaction = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: 'aGN0bIwXnHdw5645VABjPdSn8nWY7G11',
    });
  });
});

describe('retrieveTransaction', function() {
  it('Sends the correct request', function() {
    stripe.balance.<span class="apidocCodeKeywordSpan">retrieveTransaction</span>('transactionIdFoo');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/balance/history/transactionIdFoo',
      data: {},
      headers: {},
    });
  });
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.BitcoinReceivers" id="apidoc.module.stripe.BitcoinReceivers">module stripe.BitcoinReceivers</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.BitcoinReceivers.BitcoinReceivers" id="apidoc.element.stripe.BitcoinReceivers.BitcoinReceivers">
        function <span class="apidocSignatureSpan">stripe.</span>BitcoinReceivers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">BitcoinReceivers = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.BitcoinReceivers.extend" id="apidoc.element.stripe.BitcoinReceivers.extend">
        function <span class="apidocSignatureSpan">stripe.BitcoinReceivers.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.BitcoinReceivers.method" id="apidoc.element.stripe.BitcoinReceivers.method">
        function <span class="apidocSignatureSpan">stripe.BitcoinReceivers.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.BitcoinReceivers.prototype" id="apidoc.module.stripe.BitcoinReceivers.prototype">module stripe.BitcoinReceivers.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.BitcoinReceivers.prototype.listTransactions" id="apidoc.element.stripe.BitcoinReceivers.prototype.listTransactions">
        function <span class="apidocSignatureSpan">stripe.BitcoinReceivers.prototype.</span>listTransactions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listTransactions = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('listTransactions', function() {
  it('Sends the correct request', function() {
    stripe.balance.<span class="apidocCodeKeywordSpan">listTransactions</span>();
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/balance/history',
      data: {},
      headers: {},
    });
  });
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.ChargeRefunds" id="apidoc.module.stripe.ChargeRefunds">module stripe.ChargeRefunds</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.ChargeRefunds.ChargeRefunds" id="apidoc.element.stripe.ChargeRefunds.ChargeRefunds">
        function <span class="apidocSignatureSpan">stripe.</span>ChargeRefunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ChargeRefunds = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var CHARGE_TEST_ID = 'chargeIdTest999';
var REFUND_TEST_ID = 'refundIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var chargeRefund = new resources.<span class="apidocCodeKeywordSpan">ChargeRefunds</span>(
  stripe,
  {chargeId: CHARGE_TEST_ID}
);

// Use spy from existing resource:
chargeRefund._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ChargeRefunds.extend" id="apidoc.element.stripe.ChargeRefunds.extend">
        function <span class="apidocSignatureSpan">stripe.ChargeRefunds.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ChargeRefunds.method" id="apidoc.element.stripe.ChargeRefunds.method">
        function <span class="apidocSignatureSpan">stripe.ChargeRefunds.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Charges" id="apidoc.module.stripe.Charges">module stripe.Charges</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Charges.Charges" id="apidoc.element.stripe.Charges.Charges">
        function <span class="apidocSignatureSpan">stripe.</span>Charges
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Charges = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.extend" id="apidoc.element.stripe.Charges.extend">
        function <span class="apidocSignatureSpan">stripe.Charges.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.method" id="apidoc.element.stripe.Charges.method">
        function <span class="apidocSignatureSpan">stripe.Charges.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Charges.prototype" id="apidoc.module.stripe.Charges.prototype">module stripe.Charges.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.capture" id="apidoc.element.stripe.Charges.prototype.capture">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>capture
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">capture = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('capture', function() {
  it('Sends the correct request', function() {
    stripe.charges.<span class="apidocCodeKeywordSpan">capture</span>('chargeIdExample3242', {amount: 23});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/charges/chargeIdExample3242/capture',
      headers: {},
      data: {amount: 23},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.closeDispute" id="apidoc.element.stripe.Charges.prototype.closeDispute">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>closeDispute
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">closeDispute = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {evidence: 'foo'},
    });
  });
});

describe('closeDispute', function() {
  it('Sends the correct request', function() {
    stripe.charges.<span class="apidocCodeKeywordSpan">closeDispute</span>('chargeIdExample3242', {});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/charges/chargeIdExample3242/dispute/close',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.createRefund" id="apidoc.element.stripe.Charges.prototype.createRefund">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>createRefund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createRefund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    url: '/v1/application_fees/appFeeIdExample3242/refunds/refundIdExample2312',
    data: {metadata: {key: 'value'}},
    headers: {},
  });
});

it('Sends the correct create request', function() {
  stripe.applicationFees.<span class="apidocCodeKeywordSpan">createRefund</span>(
    'appFeeIdExample3242',
    {amount: 100}
  );
  expect(stripe.LAST_REQUEST).to.deep.equal({
    method: 'POST',
    url: '/v1/application_fees/appFeeIdExample3242/refunds',
    data: {amount: 100},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.listRefunds" id="apidoc.element.stripe.Charges.prototype.listRefunds">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>listRefunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listRefunds = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    url: '/v1/application_fees/appFeeIdExample3242/refunds',
    data: {amount: 100},
    headers: {},
  });
});

it('Sends the correct list request', function() {
  stripe.applicationFees.<span class="apidocCodeKeywordSpan">listRefunds</span>(
    'appFeeIdExample3242'
  );
  expect(stripe.LAST_REQUEST).to.deep.equal({
    method: 'GET',
    url: '/v1/application_fees/appFeeIdExample3242/refunds',
    data: {},
    headers: {},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.markAsFraudulent" id="apidoc.element.stripe.Charges.prototype.markAsFraudulent">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>markAsFraudulent
        <span class="apidocSignatureSpan">(chargeId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">markAsFraudulent = function (chargeId) {
  return this.update(chargeId, {'fraud_details': {'user_report': 'fraudulent'}})
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {},
    });
  });
});

describe('markAsFraudulent', function() {
  it('Sends the correct request', function() {
    stripe.charges.<span class="apidocCodeKeywordSpan">markAsFraudulent</span>('chargeIdExample3242');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/charges/chargeIdExample3242',
      data: {'fraud_details': {'user_report': 'fraudulent'}},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.markAsSafe" id="apidoc.element.stripe.Charges.prototype.markAsSafe">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>markAsSafe
        <span class="apidocSignatureSpan">(chargeId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">markAsSafe = function (chargeId) {
  return this.update(chargeId, {'fraud_details': {'user_report': 'safe'}})
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('markAsSafe', function() {
  it('Sends the correct request', function() {
    stripe.charges.<span class="apidocCodeKeywordSpan">markAsSafe</span>('chargeIdExample3242');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/charges/chargeIdExample3242',
      data: {'fraud_details': {'user_report': 'safe'}},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.refund" id="apidoc.element.stripe.Charges.prototype.refund">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>refund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">refund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('refund', function() {
  it('Sends the correct request', function() {
    stripe.applicationFees.<span class="apidocCodeKeywordSpan">refund</span>('applicationFeeIdExample3242', {amount: 23
});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/application_fees/applicationFeeIdExample3242/refund',
      data: {amount: 23},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.retrieveRefund" id="apidoc.element.stripe.Charges.prototype.retrieveRefund">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>retrieveRefund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveRefund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * requires an application fee id , and therefore each of its methods only
 * require the refundId argument.
 *
 * This streamlines the API specifically for the case of accessing refunds
 * on a returned application fee object.
 *
 * E.g. applicationFeeObject.refunds.retrieve(refundId)
 * (As opposed to the also-supported stripe.applicationFees.<span class="apidocCodeKeywordSpan">retrieveRefund</span>(chargeId,
 * refundId))
 */
module.exports = StripeResource.extend({
  path: 'application_fees/{feeId}/refunds',
  includeBasic: ['create', 'list', 'retrieve', 'update'],
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.updateDispute" id="apidoc.element.stripe.Charges.prototype.updateDispute">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>updateDispute
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateDispute = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {},
    });
  });
});

describe('updateDispute', function() {
  it('Sends the correct request', function() {
    stripe.charges.<span class="apidocCodeKeywordSpan">updateDispute</span>('chargeIdExample3242', {evidence: 'foo
'});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/charges/chargeIdExample3242/dispute',
      headers: {},
      data: {evidence: 'foo'},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Charges.prototype.updateRefund" id="apidoc.element.stripe.Charges.prototype.updateRefund">
        function <span class="apidocSignatureSpan">stripe.Charges.prototype.</span>updateRefund
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateRefund = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('refunds', function() {
  it('Sends the correct update request', function() {
    stripe.applicationFees.<span class="apidocCodeKeywordSpan">updateRefund</span>(
      'appFeeIdExample3242',
      'refundIdExample2312',
      {metadata: {key: 'value'}}
    );
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/application_fees/appFeeIdExample3242/refunds/refundIdExample2312',
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.CountrySpecs" id="apidoc.module.stripe.CountrySpecs">module stripe.CountrySpecs</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.CountrySpecs.CountrySpecs" id="apidoc.element.stripe.CountrySpecs.CountrySpecs">
        function <span class="apidocSignatureSpan">stripe.</span>CountrySpecs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">CountrySpecs = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CountrySpecs.extend" id="apidoc.element.stripe.CountrySpecs.extend">
        function <span class="apidocSignatureSpan">stripe.CountrySpecs.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CountrySpecs.method" id="apidoc.element.stripe.CountrySpecs.method">
        function <span class="apidocSignatureSpan">stripe.CountrySpecs.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Coupons" id="apidoc.module.stripe.Coupons">module stripe.Coupons</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Coupons.Coupons" id="apidoc.element.stripe.Coupons.Coupons">
        function <span class="apidocSignatureSpan">stripe.</span>Coupons
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Coupons = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Coupons.extend" id="apidoc.element.stripe.Coupons.extend">
        function <span class="apidocSignatureSpan">stripe.Coupons.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Coupons.method" id="apidoc.element.stripe.Coupons.method">
        function <span class="apidocSignatureSpan">stripe.Coupons.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.CustomerCards" id="apidoc.module.stripe.CustomerCards">module stripe.CustomerCards</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.CustomerCards.CustomerCards" id="apidoc.element.stripe.CustomerCards.CustomerCards">
        function <span class="apidocSignatureSpan">stripe.</span>CustomerCards
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">CustomerCards = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var resources = require('../../lib/stripe').resources;
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var CUSTOMER_TEST_ID = 'customerIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var customerCard = new resources.<span class="apidocCodeKeywordSpan">CustomerCards</span>(
  stripe,
  {customerId: CUSTOMER_TEST_ID}
);

// Use spy from existing resource:
customerCard._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CustomerCards.extend" id="apidoc.element.stripe.CustomerCards.extend">
        function <span class="apidocSignatureSpan">stripe.CustomerCards.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CustomerCards.method" id="apidoc.element.stripe.CustomerCards.method">
        function <span class="apidocSignatureSpan">stripe.CustomerCards.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.CustomerSubscriptions" id="apidoc.module.stripe.CustomerSubscriptions">module stripe.CustomerSubscriptions</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.CustomerSubscriptions.CustomerSubscriptions" id="apidoc.element.stripe.CustomerSubscriptions.CustomerSubscriptions">
        function <span class="apidocSignatureSpan">stripe.</span>CustomerSubscriptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">CustomerSubscriptions = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var resources = require('../../lib/stripe').resources;
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var CUSTOMER_TEST_ID = 'customerIdTest999';

// Create new CustomerSubscription instance with pre-filled customerId:
var customerSubscription = new resources.<span class="apidocCodeKeywordSpan">CustomerSubscriptions</span>(
    stripe,
    {customerId: CUSTOMER_TEST_ID}
);

// Use spy from existing resource:
customerSubscription._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CustomerSubscriptions.extend" id="apidoc.element.stripe.CustomerSubscriptions.extend">
        function <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.CustomerSubscriptions.method" id="apidoc.element.stripe.CustomerSubscriptions.method">
        function <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.CustomerSubscriptions.prototype" id="apidoc.module.stripe.CustomerSubscriptions.prototype">module stripe.CustomerSubscriptions.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.CustomerSubscriptions.prototype.deleteDiscount" id="apidoc.element.stripe.CustomerSubscriptions.prototype.deleteDiscount">
        function <span class="apidocSignatureSpan">stripe.CustomerSubscriptions.prototype.</span>deleteDiscount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteDiscount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return expect(
    stripe.customers.retrieve(customer.id)
  ).to.eventually.have.deep.property('discount.coupon.id', coupon.id);
});
describe('The resulting discount', function() {
  it('Can be removed', function() {
    return expect(
      stripe.customers.<span class="apidocCodeKeywordSpan">deleteDiscount</span>(customer.id)
    ).to.eventually.have.property('deleted', true);
  });
  describe('Re-querying it', function() {
    it('Does indeed indicate that it is deleted', function() {
      return expect(
        stripe.customers.retrieve(customer.id)
      ).to.eventually.have.deep.property('discount', null);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Customers" id="apidoc.module.stripe.Customers">module stripe.Customers</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Customers.Customers" id="apidoc.element.stripe.Customers.Customers">
        function <span class="apidocSignatureSpan">stripe.</span>Customers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Customers = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.extend" id="apidoc.element.stripe.Customers.extend">
        function <span class="apidocSignatureSpan">stripe.Customers.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.method" id="apidoc.element.stripe.Customers.method">
        function <span class="apidocSignatureSpan">stripe.Customers.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Customers.prototype" id="apidoc.module.stripe.Customers.prototype">module stripe.Customers.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype._legacyCancelSubscription" id="apidoc.element.stripe.Customers.prototype._legacyCancelSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_legacyCancelSubscription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_legacyCancelSubscription = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype._legacyUpdateSubscription" id="apidoc.element.stripe.Customers.prototype._legacyUpdateSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_legacyUpdateSubscription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_legacyUpdateSubscription = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype._newstyleCancelSubscription" id="apidoc.element.stripe.Customers.prototype._newstyleCancelSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_newstyleCancelSubscription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_newstyleCancelSubscription = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype._newstyleUpdateSubscription" id="apidoc.element.stripe.Customers.prototype._newstyleUpdateSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>_newstyleUpdateSubscription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_newstyleUpdateSubscription = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.cancelSubscription" id="apidoc.element.stripe.Customers.prototype.cancelSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>cancelSubscription
        <span class="apidocSignatureSpan">(customerId, subscriptionId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelSubscription = function (customerId, subscriptionId) {
  // This is a hack, but it lets us maximize our overloading.
  // Precarious assumption: If it's not an auth key it _could_ be a sub id:
  if (typeof subscriptionId == 'string' &amp;&amp; !utils.isAuthKey(subscriptionId)) {
    return this._newstyleCancelSubscription.apply(this, arguments);
  } else {
    return this._legacyCancelSubscription.apply(this, arguments);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      cleanup.deleteCustomer(customer.id);
      cleanup.deletePlan(plan.id);

      return stripe.customers.updateSubscription(customer.id, {
        plan: plan.id,
      });
    }).then(function(subscription) {
      return stripe.customers.<span class="apidocCodeKeywordSpan">cancelSubscription</span>(subscription.customer, {
        at_period_end: true,
      });
    })
  ).to.eventually.have.property('cancel_at_period_end', true);
});

describe('Plan name variations', function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.createCard" id="apidoc.element.stripe.Customers.prototype.createCard">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>createCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      resolve('Called!');
    });
  })).to.eventually.equal('Called!');
});

it('Given an error the callback will receive it', function() {
  return expect(new Promise(function(resolve, reject) {
    stripe.customers.<span class="apidocCodeKeywordSpan">createCard</span>('nonExistentCustId', {card: {}}, function(err
, customer) {
      if (err) {
        resolve('ErrorWasPassed');
      } else {
        reject('NoErrorPassed');
      }
    });
  })).to.eventually.become('ErrorWasPassed');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.createSource" id="apidoc.element.stripe.Customers.prototype.createSource">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>createSource
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createSource = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
callback:

``` js
// Create a new customer and then a new charge for that customer:
stripe.customers.create({
email: 'foo-customer@example.com'
}).then(function(customer){
return stripe.customers.<span class="apidocCodeKeywordSpan">createSource</span>(customer.id, {
  source: {
     object: 'card',
     exp_month: 10,
     exp_year: 2018,
     number: '4242 4242 4242 4242',
     cvc: 100
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.createSubscription" id="apidoc.element.stripe.Customers.prototype.createSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>createSubscription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createSubscription = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
).then(function(j) {
  plan = j[0];
  var customer = j[1];

  cleanup.deleteCustomer(customer.id);
  cleanup.deletePlan(plan.id);

  return stripe.customers.<span class="apidocCodeKeywordSpan">createSubscription</span>(customer.id, {
    plan: plan.id,
  });
}).then(function(subscription) {
  return stripe.customers.updateSubscription(subscription.customer, subscription.id, {
    plan: plan.id, quantity: '3',
  });
}).then(function(subscription) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.deleteCard" id="apidoc.element.stripe.Customers.prototype.deleteCard">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {name: 'Bob M. Baz'},
    });
  });
});

describe('deleteCard', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">deleteCard</span>('customerIdFoo321', 'cardIdFoo456'
;);
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'DELETE',
      url: '/v1/customers/customerIdFoo321/cards/cardIdFoo456',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.deleteDiscount" id="apidoc.element.stripe.Customers.prototype.deleteDiscount">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteDiscount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteDiscount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return expect(
    stripe.customers.retrieve(customer.id)
  ).to.eventually.have.deep.property('discount.coupon.id', coupon.id);
});
describe('The resulting discount', function() {
  it('Can be removed', function() {
    return expect(
      stripe.customers.<span class="apidocCodeKeywordSpan">deleteDiscount</span>(customer.id)
    ).to.eventually.have.property('deleted', true);
  });
  describe('Re-querying it', function() {
    it('Does indeed indicate that it is deleted', function() {
      return expect(
        stripe.customers.retrieve(customer.id)
      ).to.eventually.have.deep.property('discount', null);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.deleteSource" id="apidoc.element.stripe.Customers.prototype.deleteSource">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteSource
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteSource = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {name: 'Bob M. Baz'},
    });
  });
});

describe('deleteSource', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">deleteSource</span>('customerIdFoo321', 'cardIdFoo456'
;);
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'DELETE',
      url: '/v1/customers/customerIdFoo321/sources/cardIdFoo456',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.deleteSubscriptionDiscount" id="apidoc.element.stripe.Customers.prototype.deleteSubscriptionDiscount">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>deleteSubscriptionDiscount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteSubscriptionDiscount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {},
    });
  });
});

describe('deleteSubscriptionDiscount', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">deleteSubscriptionDiscount</span>('customerIdFoo321', 'subscriptionIdFoo456
');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'DELETE',
      url: '/v1/customers/customerIdFoo321/subscriptions/subscriptionIdFoo456/discount',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.listCards" id="apidoc.element.stripe.Customers.prototype.listCards">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>listCards
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listCards = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('listCards', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">listCards</span>('customerIdFoo321');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/customers/customerIdFoo321/cards',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.listSources" id="apidoc.element.stripe.Customers.prototype.listSources">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>listSources
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listSources = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('listSources', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">listSources</span>('customerIdFoo321');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/customers/customerIdFoo321/sources',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.listSubscriptions" id="apidoc.element.stripe.Customers.prototype.listSubscriptions">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>listSubscriptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listSubscriptions = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      });
    });
  });
});

describe('listSubscriptions', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">listSubscriptions</span>('customerIdFoo321');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/customers/customerIdFoo321/subscriptions',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.retrieveCard" id="apidoc.element.stripe.Customers.prototype.retrieveCard">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>retrieveCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * requires a customerId, and therefore each of its methods only
 * require the cardId argument.
 *
 * This streamlines the API specifically for the case of accessing cards
 * on a returned customer object.
 *
 * E.g. customerObject.cards.retrieve(cardId)
 * (As opposed to the also-supported stripe.customers.<span class="apidocCodeKeywordSpan">retrieveCard</span>(custId, cardId))
 */
module.exports = StripeResource.extend({
  path: 'customers/{customerId}/cards',
  includeBasic: ['create', 'list', 'retrieve', 'update', 'del'],
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.retrieveSource" id="apidoc.element.stripe.Customers.prototype.retrieveSource">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>retrieveSource
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveSource = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  });
});

describe('Source methods', function() {
  describe('retrieveSource', function() {
    it('Sends the correct request', function() {
      stripe.customers.<span class="apidocCodeKeywordSpan">retrieveSource</span>('customerIdFoo321', 'cardIdFoo456
');
      expect(stripe.LAST_REQUEST).to.deep.equal({
        method: 'GET',
        url: '/v1/customers/customerIdFoo321/sources/cardIdFoo456',
        headers: {},
        data: {},
      });
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.retrieveSubscription" id="apidoc.element.stripe.Customers.prototype.retrieveSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>retrieveSubscription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveSubscription = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  });
});

describe('Subscription methods', function() {
  describe('retrieveSubscription', function() {
    it('Sends the correct request', function() {
      stripe.customers.<span class="apidocCodeKeywordSpan">retrieveSubscription</span>('customerIdFoo321', 'subscriptionIdFoo456
');
      expect(stripe.LAST_REQUEST).to.deep.equal({
        method: 'GET',
        url: '/v1/customers/customerIdFoo321/subscriptions/subscriptionIdFoo456',
        headers: {},
        data: {},
      });
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.updateCard" id="apidoc.element.stripe.Customers.prototype.updateCard">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>updateCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('updateCard', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">updateCard</span>('customerIdFoo321', 'cardIdFoo456'
;, {
      name: 'Bob M. Baz',
    });
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/customers/customerIdFoo321/cards/cardIdFoo456',
      headers: {},
      data: {name: 'Bob M. Baz'},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.updateSource" id="apidoc.element.stripe.Customers.prototype.updateSource">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>updateSource
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateSource = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('updateSource', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">updateSource</span>('customerIdFoo321', 'cardIdFoo456'
;, {
      name: 'Bob M. Baz',
    });
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/customers/customerIdFoo321/sources/cardIdFoo456',
      headers: {},
      data: {name: 'Bob M. Baz'},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.updateSubscription" id="apidoc.element.stripe.Customers.prototype.updateSubscription">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>updateSubscription
        <span class="apidocSignatureSpan">(customerId, subscriptionId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateSubscription = function (customerId, subscriptionId) {
  if (typeof subscriptionId == 'string') {
    return this._newstyleUpdateSubscription.apply(this, arguments);
  } else {
    return this._legacyUpdateSubscription.apply(this, arguments);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ).then(function(j) {
      var plan = j[0];
      var customer = j[1];

      cleanup.deleteCustomer(customer.id);
      cleanup.deletePlan(plan.id);

      return stripe.customers.<span class="apidocCodeKeywordSpan">updateSubscription</span>(customer.id, {
        plan: plan.id,
      });
    })
  ).to.eventually.have.property('status', 'active');
});

it(
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Customers.prototype.verifySource" id="apidoc.element.stripe.Customers.prototype.verifySource">
        function <span class="apidocSignatureSpan">stripe.Customers.prototype.</span>verifySource
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">verifySource = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      });
    });

    describe('verifySource', function() {
      it('Sends the correct request', function() {
var data = {amounts: [32,45]}

stripe.customers.<span class="apidocCodeKeywordSpan">verifySource</span>('customerIdFoo321', 'cardIdFoo456',
data, TEST_AUTH_KEY);
expect(stripe.LAST_REQUEST).to.deep.equal({
  method: 'POST',
  url: '/v1/customers/customerIdFoo321/sources/cardIdFoo456/verify',
  headers: {},
  data: data,
  auth: TEST_AUTH_KEY,
})
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Disputes" id="apidoc.module.stripe.Disputes">module stripe.Disputes</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Disputes.Disputes" id="apidoc.element.stripe.Disputes.Disputes">
        function <span class="apidocSignatureSpan">stripe.</span>Disputes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Disputes = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Disputes.extend" id="apidoc.element.stripe.Disputes.extend">
        function <span class="apidocSignatureSpan">stripe.Disputes.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Disputes.method" id="apidoc.element.stripe.Disputes.method">
        function <span class="apidocSignatureSpan">stripe.Disputes.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Disputes.prototype" id="apidoc.module.stripe.Disputes.prototype">module stripe.Disputes.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Disputes.prototype.close" id="apidoc.element.stripe.Disputes.prototype.close">
        function <span class="apidocSignatureSpan">stripe.Disputes.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('close', function() {
  it('Sends the correct request', function() {
    stripe.disputes.<span class="apidocCodeKeywordSpan">close</span>('dp_123');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/disputes/dp_123/close',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Error" id="apidoc.module.stripe.Error">module stripe.Error</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Error.Error" id="apidoc.element.stripe.Error.Error">
        function <span class="apidocSignatureSpan">stripe.</span>Error
        <span class="apidocSignatureSpan">(raw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _Error(raw) {
  this.populate.apply(this, arguments);
  this.stack = (new Error(this.message)).stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeAPIError" id="apidoc.element.stripe.Error.StripeAPIError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeAPIError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeAPIError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
StripeError.generate = function(rawStripeError) {
  switch (rawStripeError.type) {
    case 'card_error':
      return new _Error.StripeCardError(rawStripeError);
    case 'invalid_request_error':
      return new _Error.StripeInvalidRequestError(rawStripeError);
    case 'api_error':
      return new _Error.<span class="apidocCodeKeywordSpan">StripeAPIError</span>(rawStripeError);
  }
  return new _Error('Generic', 'Unknown Error');
};

// Specific Stripe Error types:
_Error.StripeCardError = StripeError.extend({type: 'StripeCardError'});
_Error.StripeInvalidRequestError = StripeError.extend({type: 'StripeInvalidRequestError'});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeAuthenticationError" id="apidoc.element.stripe.Error.StripeAuthenticationError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeAuthenticationError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeAuthenticationError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// These are now available on the top-level resource's
// lastResponse, but we keep them here too for backwards
// compatibility.
response.error.statusCode = res.statusCode;
response.error.requestId = res.requestId;

if (res.statusCode === 401) {
  err = new Error.<span class="apidocCodeKeywordSpan">StripeAuthenticationError</span>(response.error);
} else if (res.statusCode === 403) {
  err = new Error.StripePermissionError(response.error);
} else if (res.statusCode === 429) {
  err = new Error.StripeRateLimitError(response.error);
} else {
  err = Error.StripeError.generate(response.error);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeCardError" id="apidoc.element.stripe.Error.StripeCardError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeCardError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeCardError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Helper factory which takes raw stripe errors and outputs wrapping instances
 */
StripeError.generate = function(rawStripeError) {
  switch (rawStripeError.type) {
    case 'card_error':
      return new _Error.<span class="apidocCodeKeywordSpan">StripeCardError</span>(rawStripeError);
    case 'invalid_request_error':
      return new _Error.StripeInvalidRequestError(rawStripeError);
    case 'api_error':
      return new _Error.StripeAPIError(rawStripeError);
  }
  return new _Error('Generic', 'Unknown Error');
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeConnectionError" id="apidoc.element.stripe.Error.StripeConnectionError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeConnectionError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeConnectionError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    timeoutErr.code = 'ETIMEDOUT';

    req._isAborted = true;
    req.abort();

    callback.call(
      self,
      new Error.<span class="apidocCodeKeywordSpan">StripeConnectionError</span>({
        message: 'Request aborted due to timeout being reached (' + timeout + 'ms)',
        detail: timeoutErr,
      }),
      null
    );
  }
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeError" id="apidoc.element.stripe.Error.StripeError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeInvalidRequestError" id="apidoc.element.stripe.Error.StripeInvalidRequestError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeInvalidRequestError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeInvalidRequestError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Helper factory which takes raw stripe errors and outputs wrapping instances
 */
StripeError.generate = function(rawStripeError) {
  switch (rawStripeError.type) {
    case 'card_error':
      return new _Error.StripeCardError(rawStripeError);
    case 'invalid_request_error':
      return new _Error.<span class="apidocCodeKeywordSpan">StripeInvalidRequestError</span>(rawStripeError);
    case 'api_error':
      return new _Error.StripeAPIError(rawStripeError);
  }
  return new _Error('Generic', 'Unknown Error');
};

// Specific Stripe Error types:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripePermissionError" id="apidoc.element.stripe.Error.StripePermissionError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripePermissionError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripePermissionError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // compatibility.
  response.error.statusCode = res.statusCode;
  response.error.requestId = res.requestId;

  if (res.statusCode === 401) {
    err = new Error.StripeAuthenticationError(response.error);
  } else if (res.statusCode === 403) {
    err = new Error.<span class="apidocCodeKeywordSpan">StripePermissionError</span>(response.error);
  } else if (res.statusCode === 429) {
    err = new Error.StripeRateLimitError(response.error);
  } else {
    err = Error.StripeError.generate(response.error);
  }
  return callback.call(self, err, null);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.StripeRateLimitError" id="apidoc.element.stripe.Error.StripeRateLimitError">
        function <span class="apidocSignatureSpan">stripe.Error.</span>StripeRateLimitError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">StripeRateLimitError = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    response.error.requestId = res.requestId;

    if (res.statusCode === 401) {
      err = new Error.StripeAuthenticationError(response.error);
    } else if (res.statusCode === 403) {
      err = new Error.StripePermissionError(response.error);
    } else if (res.statusCode === 429) {
      err = new Error.<span class="apidocCodeKeywordSpan">StripeRateLimitError</span>(response.error);
    } else {
      err = Error.StripeError.generate(response.error);
    }
    return callback.call(self, err, null);
  }
} catch (e) {
  return callback.call(
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Error.extend" id="apidoc.element.stripe.Error.extend">
        function <span class="apidocSignatureSpan">stripe.Error.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Error.prototype" id="apidoc.module.stripe.Error.prototype">module stripe.Error.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Error.prototype.populate" id="apidoc.element.stripe.Error.prototype.populate">
        function <span class="apidocSignatureSpan">stripe.Error.prototype.</span>populate
        <span class="apidocSignatureSpan">(type, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">populate = function (type, message) {
  this.type = type;
  this.message = message;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Events" id="apidoc.module.stripe.Events">module stripe.Events</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Events.Events" id="apidoc.element.stripe.Events.Events">
        function <span class="apidocSignatureSpan">stripe.</span>Events
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Events = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Events.extend" id="apidoc.element.stripe.Events.extend">
        function <span class="apidocSignatureSpan">stripe.Events.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Events.method" id="apidoc.element.stripe.Events.method">
        function <span class="apidocSignatureSpan">stripe.Events.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.FileUploads" id="apidoc.module.stripe.FileUploads">module stripe.FileUploads</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.FileUploads.FileUploads" id="apidoc.element.stripe.FileUploads.FileUploads">
        function <span class="apidocSignatureSpan">stripe.</span>FileUploads
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">FileUploads = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.FileUploads.extend" id="apidoc.element.stripe.FileUploads.extend">
        function <span class="apidocSignatureSpan">stripe.FileUploads.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.FileUploads.method" id="apidoc.element.stripe.FileUploads.method">
        function <span class="apidocSignatureSpan">stripe.FileUploads.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.FileUploads.prototype" id="apidoc.module.stripe.FileUploads.prototype">module stripe.FileUploads.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.FileUploads.prototype.create" id="apidoc.element.stripe.FileUploads.prototype.create">
        function <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.FileUploads.prototype.requestDataProcessor" id="apidoc.element.stripe.FileUploads.prototype.requestDataProcessor">
        function <span class="apidocSignatureSpan">stripe.FileUploads.prototype.</span>requestDataProcessor
        <span class="apidocSignatureSpan">(method, data, headers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">requestDataProcessor = function (method, data, headers) {
  data = data || {};

  if (method === 'POST') {
    return multipartDataGenerator(method, data, headers);
  } else {
    return utils.stringifyRequestData(data);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  },

  _request: function(method, path, data, auth, options, callback) {
var self = this;
var requestData;

if (self.requestDataProcessor) {
  requestData = self.<span class="apidocCodeKeywordSpan">requestDataProcessor</span>(method, data, options.headers);
} else {
  requestData = utils.stringifyRequestData(data || {});
}

var apiVersion = this._stripe.getApiField('version');

var headers = {
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.InvoiceItems" id="apidoc.module.stripe.InvoiceItems">module stripe.InvoiceItems</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.InvoiceItems.InvoiceItems" id="apidoc.element.stripe.InvoiceItems.InvoiceItems">
        function <span class="apidocSignatureSpan">stripe.</span>InvoiceItems
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">InvoiceItems = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.InvoiceItems.extend" id="apidoc.element.stripe.InvoiceItems.extend">
        function <span class="apidocSignatureSpan">stripe.InvoiceItems.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.InvoiceItems.method" id="apidoc.element.stripe.InvoiceItems.method">
        function <span class="apidocSignatureSpan">stripe.InvoiceItems.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Invoices" id="apidoc.module.stripe.Invoices">module stripe.Invoices</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Invoices.Invoices" id="apidoc.element.stripe.Invoices.Invoices">
        function <span class="apidocSignatureSpan">stripe.</span>Invoices
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Invoices = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Invoices.extend" id="apidoc.element.stripe.Invoices.extend">
        function <span class="apidocSignatureSpan">stripe.Invoices.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Invoices.method" id="apidoc.element.stripe.Invoices.method">
        function <span class="apidocSignatureSpan">stripe.Invoices.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Invoices.prototype" id="apidoc.module.stripe.Invoices.prototype">module stripe.Invoices.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Invoices.prototype.pay" id="apidoc.element.stripe.Invoices.prototype.pay">
        function <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>pay
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pay = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      });
    });
  });
});

describe('pay', function() {
  it('Sends the correct request', function() {
    stripe.invoices.<span class="apidocCodeKeywordSpan">pay</span>('invoiceId6');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/invoices/invoiceId6/pay',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Invoices.prototype.retrieveLines" id="apidoc.element.stripe.Invoices.prototype.retrieveLines">
        function <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>retrieveLines
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveLines = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {application_fee: 200},
    });
  });
});

describe('retrieveLines', function() {
  it('Sends the correct request', function() {
    stripe.invoices.<span class="apidocCodeKeywordSpan">retrieveLines</span>('invoiceId2');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/invoices/invoiceId2/lines',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Invoices.prototype.retrieveUpcoming" id="apidoc.element.stripe.Invoices.prototype.retrieveUpcoming">
        function <span class="apidocSignatureSpan">stripe.Invoices.prototype.</span>retrieveUpcoming
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveUpcoming = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  });
});

describe('retrieveUpcoming', function() {
  describe('With just a customer ID', function() {
    it('Sends the correct request', function() {
      stripe.invoices.<span class="apidocCodeKeywordSpan">retrieveUpcoming</span>('customerId1');
      expect(stripe.LAST_REQUEST).to.deep.equal({
        method: 'GET',
        url: '/v1/invoices/upcoming?customer=customerId1',
        headers: {},
        data: {},
      });
    });
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.OrderReturns" id="apidoc.module.stripe.OrderReturns">module stripe.OrderReturns</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.OrderReturns.OrderReturns" id="apidoc.element.stripe.OrderReturns.OrderReturns">
        function <span class="apidocSignatureSpan">stripe.</span>OrderReturns
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">OrderReturns = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.OrderReturns.extend" id="apidoc.element.stripe.OrderReturns.extend">
        function <span class="apidocSignatureSpan">stripe.OrderReturns.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.OrderReturns.method" id="apidoc.element.stripe.OrderReturns.method">
        function <span class="apidocSignatureSpan">stripe.OrderReturns.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Orders" id="apidoc.module.stripe.Orders">module stripe.Orders</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Orders.Orders" id="apidoc.element.stripe.Orders.Orders">
        function <span class="apidocSignatureSpan">stripe.</span>Orders
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Orders = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Orders.extend" id="apidoc.element.stripe.Orders.extend">
        function <span class="apidocSignatureSpan">stripe.Orders.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Orders.method" id="apidoc.element.stripe.Orders.method">
        function <span class="apidocSignatureSpan">stripe.Orders.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Orders.prototype" id="apidoc.module.stripe.Orders.prototype">module stripe.Orders.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Orders.prototype.create" id="apidoc.element.stripe.Orders.prototype.create">
        function <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Orders.prototype.pay" id="apidoc.element.stripe.Orders.prototype.pay">
        function <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>pay
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pay = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      });
    });
  });
});

describe('pay', function() {
  it('Sends the correct request', function() {
    stripe.invoices.<span class="apidocCodeKeywordSpan">pay</span>('invoiceId6');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/invoices/invoiceId6/pay',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Orders.prototype.returnOrder" id="apidoc.element.stripe.Orders.prototype.returnOrder">
        function <span class="apidocSignatureSpan">stripe.Orders.prototype.</span>returnOrder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">returnOrder = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {source: 'tok_FooBar'},
    });
  });
});

describe('returnOrder', function() {
  it('Sends the correct request', function() {
    stripe.orders.<span class="apidocCodeKeywordSpan">returnOrder</span>('orderIdFoo3242', {
      items: [
        {parent: 'sku_123'},
      ],
    });
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/orders/orderIdFoo3242/returns',
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Payouts" id="apidoc.module.stripe.Payouts">module stripe.Payouts</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Payouts.Payouts" id="apidoc.element.stripe.Payouts.Payouts">
        function <span class="apidocSignatureSpan">stripe.</span>Payouts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Payouts = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Payouts.extend" id="apidoc.element.stripe.Payouts.extend">
        function <span class="apidocSignatureSpan">stripe.Payouts.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Payouts.method" id="apidoc.element.stripe.Payouts.method">
        function <span class="apidocSignatureSpan">stripe.Payouts.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Payouts.prototype" id="apidoc.module.stripe.Payouts.prototype">module stripe.Payouts.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Payouts.prototype.cancel" id="apidoc.element.stripe.Payouts.prototype.cancel">
        function <span class="apidocSignatureSpan">stripe.Payouts.prototype.</span>cancel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancel = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {metadata: {key: 'value'}},
    });
  });
});

describe('cancel', function() {
  it('Sends the correct request', function() {
    stripe.payouts.<span class="apidocCodeKeywordSpan">cancel</span>(PAYOUT_TEST_ID);
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/payouts/' + PAYOUT_TEST_ID + '/cancel',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Payouts.prototype.listTransactions" id="apidoc.element.stripe.Payouts.prototype.listTransactions">
        function <span class="apidocSignatureSpan">stripe.Payouts.prototype.</span>listTransactions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listTransactions = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('listTransactions', function() {
  it('Sends the correct request', function() {
    stripe.balance.<span class="apidocCodeKeywordSpan">listTransactions</span>();
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/balance/history',
      data: {},
      headers: {},
    });
  });
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Plans" id="apidoc.module.stripe.Plans">module stripe.Plans</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Plans.Plans" id="apidoc.element.stripe.Plans.Plans">
        function <span class="apidocSignatureSpan">stripe.</span>Plans
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Plans = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Plans.extend" id="apidoc.element.stripe.Plans.extend">
        function <span class="apidocSignatureSpan">stripe.Plans.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Plans.method" id="apidoc.element.stripe.Plans.method">
        function <span class="apidocSignatureSpan">stripe.Plans.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Products" id="apidoc.module.stripe.Products">module stripe.Products</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Products.Products" id="apidoc.element.stripe.Products.Products">
        function <span class="apidocSignatureSpan">stripe.</span>Products
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Products = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Products.extend" id="apidoc.element.stripe.Products.extend">
        function <span class="apidocSignatureSpan">stripe.Products.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Products.method" id="apidoc.element.stripe.Products.method">
        function <span class="apidocSignatureSpan">stripe.Products.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Products.prototype" id="apidoc.module.stripe.Products.prototype">module stripe.Products.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Products.prototype.create" id="apidoc.element.stripe.Products.prototype.create">
        function <span class="apidocSignatureSpan">stripe.Products.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.RecipientCards" id="apidoc.module.stripe.RecipientCards">module stripe.RecipientCards</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.RecipientCards.RecipientCards" id="apidoc.element.stripe.RecipientCards.RecipientCards">
        function <span class="apidocSignatureSpan">stripe.</span>RecipientCards
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">RecipientCards = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var resources = require('../../lib/stripe').resources;
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var RECIPIENT_TEST_ID = 'recipientIdTest999';

// Create new recipientCard instance with pre-filled recipientId:
var recipientCard = new resources.<span class="apidocCodeKeywordSpan">RecipientCards</span>(
  stripe,
  {recipientId: RECIPIENT_TEST_ID}
);

// Use spy from existing resource:
recipientCard._request = stripe.recipients._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.RecipientCards.extend" id="apidoc.element.stripe.RecipientCards.extend">
        function <span class="apidocSignatureSpan">stripe.RecipientCards.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.RecipientCards.method" id="apidoc.element.stripe.RecipientCards.method">
        function <span class="apidocSignatureSpan">stripe.RecipientCards.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Recipients" id="apidoc.module.stripe.Recipients">module stripe.Recipients</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Recipients.Recipients" id="apidoc.element.stripe.Recipients.Recipients">
        function <span class="apidocSignatureSpan">stripe.</span>Recipients
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Recipients = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients.extend" id="apidoc.element.stripe.Recipients.extend">
        function <span class="apidocSignatureSpan">stripe.Recipients.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients.method" id="apidoc.element.stripe.Recipients.method">
        function <span class="apidocSignatureSpan">stripe.Recipients.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Recipients.prototype" id="apidoc.module.stripe.Recipients.prototype">module stripe.Recipients.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Recipients.prototype.createCard" id="apidoc.element.stripe.Recipients.prototype.createCard">
        function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>createCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      resolve('Called!');
    });
  })).to.eventually.equal('Called!');
});

it('Given an error the callback will receive it', function() {
  return expect(new Promise(function(resolve, reject) {
    stripe.customers.<span class="apidocCodeKeywordSpan">createCard</span>('nonExistentCustId', {card: {}}, function(err
, customer) {
      if (err) {
        resolve('ErrorWasPassed');
      } else {
        reject('NoErrorPassed');
      }
    });
  })).to.eventually.become('ErrorWasPassed');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients.prototype.deleteCard" id="apidoc.element.stripe.Recipients.prototype.deleteCard">
        function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>deleteCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {name: 'Bob M. Baz'},
    });
  });
});

describe('deleteCard', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">deleteCard</span>('customerIdFoo321', 'cardIdFoo456'
;);
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'DELETE',
      url: '/v1/customers/customerIdFoo321/cards/cardIdFoo456',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients.prototype.listCards" id="apidoc.element.stripe.Recipients.prototype.listCards">
        function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>listCards
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listCards = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('listCards', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">listCards</span>('customerIdFoo321');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/customers/customerIdFoo321/cards',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients.prototype.retrieveCard" id="apidoc.element.stripe.Recipients.prototype.retrieveCard">
        function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>retrieveCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * requires a customerId, and therefore each of its methods only
 * require the cardId argument.
 *
 * This streamlines the API specifically for the case of accessing cards
 * on a returned customer object.
 *
 * E.g. customerObject.cards.retrieve(cardId)
 * (As opposed to the also-supported stripe.customers.<span class="apidocCodeKeywordSpan">retrieveCard</span>(custId, cardId))
 */
module.exports = StripeResource.extend({
  path: 'customers/{customerId}/cards',
  includeBasic: ['create', 'list', 'retrieve', 'update', 'del'],
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Recipients.prototype.updateCard" id="apidoc.element.stripe.Recipients.prototype.updateCard">
        function <span class="apidocSignatureSpan">stripe.Recipients.prototype.</span>updateCard
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateCard = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      auth: TEST_AUTH_KEY,
    });
  });
});

describe('updateCard', function() {
  it('Sends the correct request', function() {
    stripe.customers.<span class="apidocCodeKeywordSpan">updateCard</span>('customerIdFoo321', 'cardIdFoo456'
;, {
      name: 'Bob M. Baz',
    });
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/customers/customerIdFoo321/cards/cardIdFoo456',
      headers: {},
      data: {name: 'Bob M. Baz'},
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Refunds" id="apidoc.module.stripe.Refunds">module stripe.Refunds</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Refunds.Refunds" id="apidoc.element.stripe.Refunds.Refunds">
        function <span class="apidocSignatureSpan">stripe.</span>Refunds
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Refunds = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Refunds.extend" id="apidoc.element.stripe.Refunds.extend">
        function <span class="apidocSignatureSpan">stripe.Refunds.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Refunds.method" id="apidoc.element.stripe.Refunds.method">
        function <span class="apidocSignatureSpan">stripe.Refunds.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.SKUs" id="apidoc.module.stripe.SKUs">module stripe.SKUs</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.SKUs.SKUs" id="apidoc.element.stripe.SKUs.SKUs">
        function <span class="apidocSignatureSpan">stripe.</span>SKUs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">SKUs = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.SKUs.extend" id="apidoc.element.stripe.SKUs.extend">
        function <span class="apidocSignatureSpan">stripe.SKUs.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.SKUs.method" id="apidoc.element.stripe.SKUs.method">
        function <span class="apidocSignatureSpan">stripe.SKUs.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.SKUs.prototype" id="apidoc.module.stripe.SKUs.prototype">module stripe.SKUs.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.SKUs.prototype.create" id="apidoc.element.stripe.SKUs.prototype.create">
        function <span class="apidocSignatureSpan">stripe.SKUs.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Sources" id="apidoc.module.stripe.Sources">module stripe.Sources</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Sources.Sources" id="apidoc.element.stripe.Sources.Sources">
        function <span class="apidocSignatureSpan">stripe.</span>Sources
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Sources = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Sources.extend" id="apidoc.element.stripe.Sources.extend">
        function <span class="apidocSignatureSpan">stripe.Sources.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Sources.method" id="apidoc.element.stripe.Sources.method">
        function <span class="apidocSignatureSpan">stripe.Sources.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Sources.prototype" id="apidoc.module.stripe.Sources.prototype">module stripe.Sources.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Sources.prototype.verify" id="apidoc.element.stripe.Sources.prototype.verify">
        function <span class="apidocSignatureSpan">stripe.Sources.prototype.</span>verify
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">verify = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {metadata: {foo: 'bar'}},
    });
  });
});

describe('verify', function() {
  it('Sends the correct request', function() {
    stripe.sources.<span class="apidocCodeKeywordSpan">verify</span>('src_foo', {values: [32, 45]});
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/sources/src_foo/verify',
      headers: {},
      data: {values: [32, 45]},
    });
  });
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.StripeMethod_basic" id="apidoc.module.stripe.StripeMethod_basic">module stripe.StripeMethod_basic</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.create" id="apidoc.element.stripe.StripeMethod_basic.create">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.del" id="apidoc.element.stripe.StripeMethod_basic.del">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>del
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
},
add: function(fn) {
  this._cleanupFns.push(fn);
},
deleteCustomer: function(custId) {
  this.add(function() {
    return this._stripe.customers.<span class="apidocCodeKeywordSpan">del</span>(custId);
  });
},
deletePlan: function(pId) {
  this.add(function() {
    return this._stripe.plans.del(pId);
  });
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.getMetadata" id="apidoc.element.stripe.StripeMethod_basic.getMetadata">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>getMetadata
        <span class="apidocSignatureSpan">(id, auth, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMetadata = function (id, auth, cb) {
  if (!cb &amp;&amp; typeof auth == 'function') {
    cb = auth;
    auth = null;
  }

  var urlData = this.createUrlData();
  var path = this.createFullPath('/' + id, urlData);

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    this._request('GET', path, {}, auth, {}, function(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(response.metadata);
      }
    });
  }).bind(this)), cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    stripe.customers.create(CUSTOMER_DETAILS)
      .then(function(cust) {
        customer = cust;
        cleanup.deleteCustomer(cust.id);
        return stripe.customers.setMetadata(cust.id, {foo: '123'});
      })
      .then(function() {
        return stripe.customers.<span class="apidocCodeKeywordSpan">getMetadata</span>(customer.id);
      })
  ).to.eventually.deep.equal({foo: '123'});
});
it('Can reset metadata', function() {
  var customer;
  return expect(
    stripe.customers.create(CUSTOMER_DETAILS)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.list" id="apidoc.element.stripe.StripeMethod_basic.list">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>list
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      },
    });
  });
});

describe('list', function() {
  it('Sends the correct request', function() {
    stripe.applePayDomains.<span class="apidocCodeKeywordSpan">list</span>();
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/apple_pay/domains',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.retrieve" id="apidoc.element.stripe.StripeMethod_basic.retrieve">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>retrieve
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieve = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Configuring For Connect

A per-request `Stripe-Account` header for use with [Stripe Connect][connect]
can be added to any method:

``` js
// Retrieve the balance for a connected account:
stripe.balance.<span class="apidocCodeKeywordSpan">retrieve</span>({
  stripe_account: "acct_foo"
}).then(function(balance) {
  // The balance object for the connected account
}).catch(function(err) {
  // Error
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.setMetadata" id="apidoc.element.stripe.StripeMethod_basic.setMetadata">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>setMetadata
        <span class="apidocSignatureSpan">(id, key, value, auth, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setMetadata = function (id, key, value, auth, cb) {
  var self = this;
  var data = key;
  var isObject = isPlainObject(key);
  // We assume null for an empty object
  var isNull = data === null || (isObject &amp;&amp; !Object.keys(data).length);

  // Allow optional passing of auth &amp; cb:
  if ((isNull || isObject) &amp;&amp; typeof value == 'string') {
    auth = value;
  } else if (typeof auth != 'string') {
    if (!cb &amp;&amp; typeof auth == 'function') {
      cb = auth;
    }
    auth = null;
  }

  var urlData = this.createUrlData();
  var path = this.createFullPath('/' + id, urlData);

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    if (isNull) {
      // Reset metadata:
      sendMetadata(null, auth);
    } else if (!isObject) {
      // Set individual metadata property:
      var metadata = {};
      metadata[key] = value;
      sendMetadata(metadata, auth);
    } else {
      // Set entire metadata object after resetting it:
      this._request('POST', path, {
        metadata: null,
      }, auth, {}, function(err, response) {
        if (err) {
          return reject(err);
        }
        sendMetadata(data, auth);
      });
    }

    function sendMetadata(metadata, auth) {
      self._request('POST', path, {
        metadata: metadata,
      }, auth, {}, function(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(response.metadata);
        }
      });
    }
  }).bind(this)), cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
it('Can save and retrieve metadata', function() {
  var customer;
  return expect(
    stripe.customers.create(CUSTOMER_DETAILS)
      .then(function(cust) {
        customer = cust;
        cleanup.deleteCustomer(cust.id);
        return stripe.customers.<span class="apidocCodeKeywordSpan">setMetadata</span>(cust.id, {foo: '123'});
      })
      .then(function() {
        return stripe.customers.getMetadata(customer.id);
      })
  ).to.eventually.deep.equal({foo: '123'});
});
it('Can reset metadata', function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeMethod_basic.update" id="apidoc.element.stripe.StripeMethod_basic.update">
        function <span class="apidocSignatureSpan">stripe.StripeMethod_basic.</span>update
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      customer = joined[1];
    })
  ).to.not.be.eventually.rejected;
});
describe('And I apply the coupon to the customer', function() {
  it('Does so', function() {
    return expect(
      stripe.customers.<span class="apidocCodeKeywordSpan">update</span>(customer.id, {
        coupon: coupon.id,
      })
    ).to.not.be.eventually.rejected;
  });
  it('Can be retrieved from that customer', function() {
    return expect(
      stripe.customers.retrieve(customer.id)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.StripeResource" id="apidoc.module.stripe.StripeResource">module stripe.StripeResource</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.StripeResource.StripeResource" id="apidoc.element.stripe.StripeResource.StripeResource">
        function <span class="apidocSignatureSpan">stripe.</span>StripeResource
        <span class="apidocSignatureSpan">(stripe, urlData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StripeResource(stripe, urlData) {
  this._stripe = stripe;
  this._urlData = urlData || {};

  this.basePath = utils.makeURLInterpolator(stripe.getApiField('basePath'));
  this.resourcePath = this.path;
  this.path = utils.makeURLInterpolator(this.path);

  if (this.includeBasic) {
    this.includeBasic.forEach(function(methodName) {
      this[methodName] = StripeResource.BASIC_METHODS[methodName];
    }, this);
  }

  this.initialize.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.extend" id="apidoc.element.stripe.StripeResource.extend">
        function <span class="apidocSignatureSpan">stripe.StripeResource.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.method" id="apidoc.element.stripe.StripeResource.method">
        function <span class="apidocSignatureSpan">stripe.StripeResource.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.StripeResource.prototype" id="apidoc.module.stripe.StripeResource.prototype">module stripe.StripeResource.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype._errorHandler" id="apidoc.element.stripe.StripeResource.prototype._errorHandler">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_errorHandler
        <span class="apidocSignatureSpan">(req, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_errorHandler = function (req, callback) {
  var self = this;
  return function(error) {
    if (req._isAborted) {
      // already handled
      return;
    }
    callback.call(
      self,
      new Error.StripeConnectionError({
        message: 'An error occurred with our connection to Stripe',
        detail: error,
      }),
      null
    );
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  agent: self._stripe.getApiField('agent'),
  headers: headers,
  ciphers: 'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5',
});

req.setTimeout(timeout, self._timeoutHandler(timeout, req, callback));
req.on('response', self._responseHandler(req, callback));
req.on('error', self.<span class="apidocCodeKeywordSpan">_errorHandler</span>(req, callback));

req.on('socket', function(socket) {
  socket.on((isInsecureConnection ? 'connect' : 'secureConnect'), function() {
    // Send payload; we're safe:
    req.write(requestData);
    req.end();
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype._request" id="apidoc.element.stripe.StripeResource.prototype._request">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_request
        <span class="apidocSignatureSpan">(method, path, data, auth, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_request = function (method, path, data, auth, options, callback) {
  var self = this;
  var requestData;

  if (self.requestDataProcessor) {
    requestData = self.requestDataProcessor(method, data, options.headers);
  } else {
    requestData = utils.stringifyRequestData(data || {});
  }

  var apiVersion = this._stripe.getApiField('version');

  var headers = {
    // Use specified auth token or use default from this stripe instance:
    'Authorization': auth ?
      'Basic ' + new Buffer(auth + ':').toString('base64') :
      this._stripe.getApiField('auth'),
    'Accept': 'application/json',
    'Content-Type': 'application/x-www-form-urlencoded',
    'Content-Length': requestData.length,
    'User-Agent': 'Stripe/v1 NodeBindings/' + this._stripe.getConstant('PACKAGE_VERSION'),
  };

  if (apiVersion) {
    headers['Stripe-Version'] = apiVersion;
  }

  // Grab client-user-agent before making the request:
  this._stripe.getClientUserAgent(function(cua) {
    headers['X-Stripe-Client-User-Agent'] = cua;

    if (options.headers) {
      objectAssign(headers, options.headers);
    }

    makeRequest();
  });

  function makeRequest() {
    var timeout = self._stripe.getApiField('timeout');
    var isInsecureConnection = self._stripe.getApiField('protocol') == 'http';

    var host = self.overrideHost || self._stripe.getApiField('host');

    var req = (
      isInsecureConnection ? http : https
    ).request({
      host: host,
      port: self._stripe.getApiField('port'),
      path: path,
      method: method,
      agent: self._stripe.getApiField('agent'),
      headers: headers,
      ciphers: 'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5',
    });

    req.setTimeout(timeout, self._timeoutHandler(timeout, req, callback));
    req.on('response', self._responseHandler(req, callback));
    req.on('error', self._errorHandler(req, callback));

    req.on('socket', function(socket) {
      socket.on((isInsecureConnection ? 'connect' : 'secureConnect'), function() {
        // Send payload; we're safe:
        req.write(requestData);
        req.end();
      });
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else if (!isObject) {
  // Set individual metadata property:
  var metadata = {};
  metadata[key] = value;
  sendMetadata(metadata, auth);
} else {
  // Set entire metadata object after resetting it:
  this.<span class="apidocCodeKeywordSpan">_request</span>('POST', path, {
    metadata: null,
  }, auth, {}, function(err, response) {
    if (err) {
      return reject(err);
    }
    sendMetadata(data, auth);
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype._responseHandler" id="apidoc.element.stripe.StripeResource.prototype._responseHandler">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_responseHandler
        <span class="apidocSignatureSpan">(req, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_responseHandler = function (req, callback) {
  var self = this;
  return function(res) {
    var response = '';

    res.setEncoding('utf8');
    res.on('data', function(chunk) {
      response += chunk;
    });
    res.on('end', function() {
      var headers = res.headers || {};

      try {
        response = JSON.parse(response);

        // For convenience, make Request-Id easily accessible on
        // lastResponse.
        res.requestId = headers['request-id'];

        if (response.error) {
          var err;

          // These are now available on the top-level resource's
          // lastResponse, but we keep them here too for backwards
          // compatibility.
          response.error.statusCode = res.statusCode;
          response.error.requestId = res.requestId;

          if (res.statusCode === 401) {
            err = new Error.StripeAuthenticationError(response.error);
          } else if (res.statusCode === 403) {
            err = new Error.StripePermissionError(response.error);
          } else if (res.statusCode === 429) {
            err = new Error.StripeRateLimitError(response.error);
          } else {
            err = Error.StripeError.generate(response.error);
          }
          return callback.call(self, err, null);
        }
      } catch (e) {
        return callback.call(
          self,
          new Error.StripeAPIError({
            message: 'Invalid JSON received from the Stripe API',
            response: response,
            exception: e,
            requestId: headers['request-id'],
          }),
          null
        );
      }
      // Expose res object
      Object.defineProperty(response, 'lastResponse', {
        enumerable: false,
        writable: false,
        value: res,
      });
      callback.call(self, null, response);
    });
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  method: method,
  agent: self._stripe.getApiField('agent'),
  headers: headers,
  ciphers: 'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5',
});

req.setTimeout(timeout, self._timeoutHandler(timeout, req, callback));
req.on('response', self.<span class="apidocCodeKeywordSpan">_responseHandler</span>(req, callback));
req.on('error', self._errorHandler(req, callback));

req.on('socket', function(socket) {
  socket.on((isInsecureConnection ? 'connect' : 'secureConnect'), function() {
    // Send payload; we're safe:
    req.write(requestData);
    req.end();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype._timeoutHandler" id="apidoc.element.stripe.StripeResource.prototype._timeoutHandler">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>_timeoutHandler
        <span class="apidocSignatureSpan">(timeout, req, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_timeoutHandler = function (timeout, req, callback) {
  var self = this;
  return function() {
    var timeoutErr = new Error('ETIMEDOUT');
    timeoutErr.code = 'ETIMEDOUT';

    req._isAborted = true;
    req.abort();

    callback.call(
      self,
      new Error.StripeConnectionError({
        message: 'Request aborted due to timeout being reached (' + timeout + 'ms)',
        detail: timeoutErr,
      }),
      null
    );
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: path,
  method: method,
  agent: self._stripe.getApiField('agent'),
  headers: headers,
  ciphers: 'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5',
});

req.setTimeout(timeout, self.<span class="apidocCodeKeywordSpan">_timeoutHandler</span>(timeout, req, callback));
req.on('response', self._responseHandler(req, callback));
req.on('error', self._errorHandler(req, callback));

req.on('socket', function(socket) {
  socket.on((isInsecureConnection ? 'connect' : 'secureConnect'), function() {
    // Send payload; we're safe:
    req.write(requestData);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype.createFullPath" id="apidoc.element.stripe.StripeResource.prototype.createFullPath">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>createFullPath
        <span class="apidocSignatureSpan">(commandPath, urlData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createFullPath = function (commandPath, urlData) {
  return path.join(
    this.basePath(urlData),
    this.path(urlData),
    typeof commandPath == 'function' ?
      commandPath(urlData) : commandPath
  ).replace(/\\/g, '/'); // ugly workaround for Windows
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!cb &amp;&amp; typeof auth == 'function') {
    cb = auth;
  }
  auth = null;
}

var urlData = this.createUrlData();
var path = this.<span class="apidocCodeKeywordSpan">createFullPath</span>('/' + id, urlData);

return this.wrapTimeout(new Promise((function(resolve, reject) {
  if (isNull) {
    // Reset metadata:
    sendMetadata(null, auth);
  } else if (!isObject) {
    // Set individual metadata property:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype.createResourcePathWithSymbols" id="apidoc.element.stripe.StripeResource.prototype.createResourcePathWithSymbols">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>createResourcePathWithSymbols
        <span class="apidocSignatureSpan">(pathWithSymbols)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createResourcePathWithSymbols = function (pathWithSymbols) {
  return '/' + path.join(
    this.resourcePath,
    pathWithSymbols
  ).replace(/\\/g, '/'); // ugly workaround for Windows
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var param = urlParams[i];

var isOptional = OPTIONAL_REGEX.test(param);
param = param.replace(OPTIONAL_REGEX, '');

if (param == 'id' &amp;&amp; typeof arg !== 'string') {
  var path = this.<span class="apidocCodeKeywordSpan">createResourcePathWithSymbols</span>(spec.path);
  var err = new Error(
    'Stripe: "id" must be a string, but got: ' + typeof arg +
    ' (on API request to `' + requestMethod + ' ' + path + '`)'
  );
  reject(err);
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype.createUrlData" id="apidoc.element.stripe.StripeResource.prototype.createUrlData">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>createUrlData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createUrlData = function () {
  var urlData = {};
  // Merge in baseData
  for (var i in this._urlData) {
    if (hasOwn.call(this._urlData, i)) {
      urlData[i] = this._urlData[i];
    }
  }
  return urlData;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else if (typeof auth != 'string') {
  if (!cb &amp;&amp; typeof auth == 'function') {
    cb = auth;
  }
  auth = null;
}

var urlData = this.<span class="apidocCodeKeywordSpan">createUrlData</span>();
var path = this.createFullPath('/' + id, urlData);

return this.wrapTimeout(new Promise((function(resolve, reject) {
  if (isNull) {
    // Reset metadata:
    sendMetadata(null, auth);
  } else if (!isObject) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype.initialize" id="apidoc.element.stripe.StripeResource.prototype.initialize">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>initialize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.StripeResource.prototype.wrapTimeout" id="apidoc.element.stripe.StripeResource.prototype.wrapTimeout">
        function <span class="apidocSignatureSpan">stripe.StripeResource.prototype.</span>wrapTimeout
        <span class="apidocSignatureSpan">(promise, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wrapTimeout = function (promise, callback) {
  if (callback) {
    // Ensure callback is called outside of promise stack.
    return promise.then(function(res) {
      setTimeout(function() { callback(null, res) }, 0);
    }, function(err) {
      setTimeout(function() { callback(err, null); }, 0);
    });
  }

  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  auth = null;
}

var urlData = this.createUrlData();
var path = this.createFullPath('/' + id, urlData);

return this.<span class="apidocCodeKeywordSpan">wrapTimeout</span>(new Promise((function(resolve, reject) {
  if (isNull) {
    // Reset metadata:
    sendMetadata(null, auth);
  } else if (!isObject) {
    // Set individual metadata property:
    var metadata = {};
    metadata[key] = value;
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.SubscriptionItems" id="apidoc.module.stripe.SubscriptionItems">module stripe.SubscriptionItems</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.SubscriptionItems.SubscriptionItems" id="apidoc.element.stripe.SubscriptionItems.SubscriptionItems">
        function <span class="apidocSignatureSpan">stripe.</span>SubscriptionItems
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">SubscriptionItems = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.SubscriptionItems.extend" id="apidoc.element.stripe.SubscriptionItems.extend">
        function <span class="apidocSignatureSpan">stripe.SubscriptionItems.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.SubscriptionItems.method" id="apidoc.element.stripe.SubscriptionItems.method">
        function <span class="apidocSignatureSpan">stripe.SubscriptionItems.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Subscriptions" id="apidoc.module.stripe.Subscriptions">module stripe.Subscriptions</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Subscriptions.Subscriptions" id="apidoc.element.stripe.Subscriptions.Subscriptions">
        function <span class="apidocSignatureSpan">stripe.</span>Subscriptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Subscriptions = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Subscriptions.extend" id="apidoc.element.stripe.Subscriptions.extend">
        function <span class="apidocSignatureSpan">stripe.Subscriptions.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Subscriptions.method" id="apidoc.element.stripe.Subscriptions.method">
        function <span class="apidocSignatureSpan">stripe.Subscriptions.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Subscriptions.prototype" id="apidoc.module.stripe.Subscriptions.prototype">module stripe.Subscriptions.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Subscriptions.prototype.create" id="apidoc.element.stripe.Subscriptions.prototype.create">
        function <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The package needs to be configured with your account's secret key which is
available in your [Stripe Dashboard][api-keys]. Require it with the key's
value:

``` js
var stripe = require('stripe')('sk_test_...');

stripe.customers.<span class="apidocCodeKeywordSpan">create</span>(
  { email: 'customer@example.com' },
  function(err, customer) {
    err; // null if no error occurred
    customer; // the created customer object
  }
);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Subscriptions.prototype.deleteDiscount" id="apidoc.element.stripe.Subscriptions.prototype.deleteDiscount">
        function <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>deleteDiscount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteDiscount = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return expect(
    stripe.customers.retrieve(customer.id)
  ).to.eventually.have.deep.property('discount.coupon.id', coupon.id);
});
describe('The resulting discount', function() {
  it('Can be removed', function() {
    return expect(
      stripe.customers.<span class="apidocCodeKeywordSpan">deleteDiscount</span>(customer.id)
    ).to.eventually.have.property('deleted', true);
  });
  describe('Re-querying it', function() {
    it('Does indeed indicate that it is deleted', function() {
      return expect(
        stripe.customers.retrieve(customer.id)
      ).to.eventually.have.deep.property('discount', null);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Subscriptions.prototype.update" id="apidoc.element.stripe.Subscriptions.prototype.update">
        function <span class="apidocSignatureSpan">stripe.Subscriptions.prototype.</span>update
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      customer = joined[1];
    })
  ).to.not.be.eventually.rejected;
});
describe('And I apply the coupon to the customer', function() {
  it('Does so', function() {
    return expect(
      stripe.customers.<span class="apidocCodeKeywordSpan">update</span>(customer.id, {
        coupon: coupon.id,
      })
    ).to.not.be.eventually.rejected;
  });
  it('Can be retrieved from that customer', function() {
    return expect(
      stripe.customers.retrieve(customer.id)
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.ThreeDSecure" id="apidoc.module.stripe.ThreeDSecure">module stripe.ThreeDSecure</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.ThreeDSecure.ThreeDSecure" id="apidoc.element.stripe.ThreeDSecure.ThreeDSecure">
        function <span class="apidocSignatureSpan">stripe.</span>ThreeDSecure
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ThreeDSecure = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ThreeDSecure.extend" id="apidoc.element.stripe.ThreeDSecure.extend">
        function <span class="apidocSignatureSpan">stripe.ThreeDSecure.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.ThreeDSecure.method" id="apidoc.element.stripe.ThreeDSecure.method">
        function <span class="apidocSignatureSpan">stripe.ThreeDSecure.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Tokens" id="apidoc.module.stripe.Tokens">module stripe.Tokens</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Tokens.Tokens" id="apidoc.element.stripe.Tokens.Tokens">
        function <span class="apidocSignatureSpan">stripe.</span>Tokens
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Tokens = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Tokens.extend" id="apidoc.element.stripe.Tokens.extend">
        function <span class="apidocSignatureSpan">stripe.Tokens.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Tokens.method" id="apidoc.element.stripe.Tokens.method">
        function <span class="apidocSignatureSpan">stripe.Tokens.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.TransferReversals" id="apidoc.module.stripe.TransferReversals">module stripe.TransferReversals</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.TransferReversals.TransferReversals" id="apidoc.element.stripe.TransferReversals.TransferReversals">
        function <span class="apidocSignatureSpan">stripe.</span>TransferReversals
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">TransferReversals = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stripe = require('../testUtils').getSpyableStripe();
var expect = require('chai').expect;

var TRANSFER_TEST_ID = 'transferIdTest999';
var REVERSAL_TEST_ID = 'reversalIdTest999';

// Create new CustomerCard instance with pre-filled customerId:
var transferReversal = new resources.<span class="apidocCodeKeywordSpan">TransferReversals</span>(
  stripe,
  {transferId: TRANSFER_TEST_ID}
);

// Use spy from existing resource:
transferReversal._request = stripe.customers._request;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.TransferReversals.extend" id="apidoc.element.stripe.TransferReversals.extend">
        function <span class="apidocSignatureSpan">stripe.TransferReversals.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.TransferReversals.method" id="apidoc.element.stripe.TransferReversals.method">
        function <span class="apidocSignatureSpan">stripe.TransferReversals.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Transfers" id="apidoc.module.stripe.Transfers">module stripe.Transfers</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Transfers.Transfers" id="apidoc.element.stripe.Transfers.Transfers">
        function <span class="apidocSignatureSpan">stripe.</span>Transfers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Transfers = function () {
  Super.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.extend" id="apidoc.element.stripe.Transfers.extend">
        function <span class="apidocSignatureSpan">stripe.Transfers.</span>extend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

_Error.extend = utils.protoExtend;

/**
 * Create subclass of internal Error klass
 * (Specifically for errors returned from Stripe's REST API)
 */
var StripeError = _Error.StripeError = _Error.<span class="apidocCodeKeywordSpan">extend</span>({
  type: 'StripeError',
  populate: function(raw) {
// Move from prototype def (so it appears in stringified obj)
this.type = this.type;

this.stack = (new Error(raw.message)).stack;
this.rawType = raw.type;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.method" id="apidoc.element.stripe.Transfers.method">
        function <span class="apidocSignatureSpan">stripe.Transfers.</span>method
        <span class="apidocSignatureSpan">(spec)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stripeMethod(spec) {
  var commandPath = typeof spec.path == 'function' ? spec.path
                  : utils.makeURLInterpolator(spec.path || '');
  var requestMethod = (spec.method || 'GET').toUpperCase();
  var urlParams = spec.urlParams || [];
  var encode = spec.encode || function(data) {return data;};

  return function() {
    var self = this;
    var args = [].slice.call(arguments);

    var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
    var urlData = this.createUrlData();

    return this.wrapTimeout(new Promise((function(resolve, reject) {
      for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
        // Note that we shift the args array after every iteration so this just
        // grabs the "next" argument for use as a URL parameter.
        var arg = args[0];

        var param = urlParams[i];

        var isOptional = OPTIONAL_REGEX.test(param);
        param = param.replace(OPTIONAL_REGEX, '');

        if (param == 'id' &amp;&amp; typeof arg !== 'string') {
          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: "id" must be a string, but got: ' + typeof arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        if (!arg) {
          if (isOptional) {
            urlData[param] = '';
            continue;
          }

          var path = this.createResourcePathWithSymbols(spec.path);
          var err = new Error(
            'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
            ' (on API request to `' + requestMethod + ' ' + path + '`)'
          );
          reject(err);
          return;
        }

        urlData[param] = args.shift();
      }

      var data = encode(utils.getDataFromArgs(args));
      var opts = utils.getOptionsFromArgs(args);

      if (args.length) {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
          'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
          ' (on API request to ' + requestMethod + ' `' + path + '`)'
        );
        reject(err);
        return;
      }

      var requestPath = this.createFullPath(commandPath, urlData);
      function requestCallback(err, response) {
        if (err) {
          reject(err);
        } else {
          resolve(
            spec.transformResponseData ?
              spec.transformResponseData(response) :
              response
          );
        }
      };

      var options = {headers: objectAssign(opts.headers, spec.headers)};
      self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
    }).bind(this)), callback);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.Transfers.prototype" id="apidoc.module.stripe.Transfers.prototype">module stripe.Transfers.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.cancel" id="apidoc.element.stripe.Transfers.prototype.cancel">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>cancel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancel = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {metadata: {key: 'value'}},
    });
  });
});

describe('cancel', function() {
  it('Sends the correct request', function() {
    stripe.payouts.<span class="apidocCodeKeywordSpan">cancel</span>(PAYOUT_TEST_ID);
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/payouts/' + PAYOUT_TEST_ID + '/cancel',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.createReversal" id="apidoc.element.stripe.Transfers.prototype.createReversal">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>createReversal
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createReversal = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.listReversals" id="apidoc.element.stripe.Transfers.prototype.listReversals">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>listReversals
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listReversals = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.listTransactions" id="apidoc.element.stripe.Transfers.prototype.listTransactions">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>listTransactions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listTransactions = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      headers: {},
    });
  });
});

describe('listTransactions', function() {
  it('Sends the correct request', function() {
    stripe.balance.<span class="apidocCodeKeywordSpan">listTransactions</span>();
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'GET',
      url: '/v1/balance/history',
      data: {},
      headers: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.retrieveReversal" id="apidoc.element.stripe.Transfers.prototype.retrieveReversal">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>retrieveReversal
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveReversal = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * requires a transferId, and therefore each of its methods only
 * require the reversalId argument.
 *
 * This streamlines the API specifically for the case of accessing reversals
 * on a returned transfer object.
 *
 * E.g. transferObject.reversals.retrieve(reversalId)
 * (As opposed to the also-supported stripe.transfers.<span class="apidocCodeKeywordSpan">retrieveReversal</span>(transferId,
 * reversalId))
 */
module.exports = StripeResource.extend({
  path: 'transfers/{transferId}/reversals',
  includeBasic: ['create', 'list', 'retrieve', 'update'],
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.reverse" id="apidoc.element.stripe.Transfers.prototype.reverse">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>reverse
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reverse = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      data: {},
    });
  });
});

describe('reverse', function() {
  it('Sends the correct request', function() {
    stripe.transfers.<span class="apidocCodeKeywordSpan">reverse</span>('transferId4');
    expect(stripe.LAST_REQUEST).to.deep.equal({
      method: 'POST',
      url: '/v1/transfers/transferId4/reversals',
      headers: {},
      data: {},
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.Transfers.prototype.updateReversal" id="apidoc.element.stripe.Transfers.prototype.updateReversal">
        function <span class="apidocSignatureSpan">stripe.Transfers.prototype.</span>updateReversal
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateReversal = function () {
  var self = this;
  var args = [].slice.call(arguments);

  var callback = typeof args[args.length - 1] == 'function' &amp;&amp; args.pop();
  var urlData = this.createUrlData();

  return this.wrapTimeout(new Promise((function(resolve, reject) {
    for (var i = 0, l = urlParams.length; i &lt; l; ++i) {
      // Note that we shift the args array after every iteration so this just
      // grabs the "next" argument for use as a URL parameter.
      var arg = args[0];

      var param = urlParams[i];

      var isOptional = OPTIONAL_REGEX.test(param);
      param = param.replace(OPTIONAL_REGEX, '');

      if (param == 'id' &amp;&amp; typeof arg !== 'string') {
        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: "id" must be a string, but got: ' + typeof arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      if (!arg) {
        if (isOptional) {
          urlData[param] = '';
          continue;
        }

        var path = this.createResourcePathWithSymbols(spec.path);
        var err = new Error(
          'Stripe: Argument "' + urlParams[i] + '" required, but got: ' + arg +
          ' (on API request to `' + requestMethod + ' ' + path + '`)'
        );
        reject(err);
        return;
      }

      urlData[param] = args.shift();
    }

    var data = encode(utils.getDataFromArgs(args));
    var opts = utils.getOptionsFromArgs(args);

    if (args.length) {
      var path = this.createResourcePathWithSymbols(spec.path);
      var err = new Error(
        'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
        'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
        ' (on API request to ' + requestMethod + ' `' + path + '`)'
      );
      reject(err);
      return;
    }

    var requestPath = this.createFullPath(commandPath, urlData);
    function requestCallback(err, response) {
      if (err) {
        reject(err);
      } else {
        resolve(
          spec.transformResponseData ?
            spec.transformResponseData(response) :
            response
        );
      }
    };

    var options = {headers: objectAssign(opts.headers, spec.headers)};
    self._request(requestMethod, requestPath, data, opts.auth, options, requestCallback);
  }).bind(this)), callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stripe.utils" id="apidoc.module.stripe.utils">module stripe.utils</a></h1>


    <h2>
        <a href="#apidoc.element.stripe.utils.arrayToObject" id="apidoc.element.stripe.utils.arrayToObject">
        function <span class="apidocSignatureSpan">stripe.utils.</span>arrayToObject
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">arrayToObject = function (arr) {
  if (Array.isArray(arr)) {
    var obj = {};
    arr.map(function(item, i) {
      obj[i.toString()] = item;
    });
    return obj;
  }
  return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
    expect(args.length).to.equal(0);
  });
});

describe('arrayToObject', function() {
  it('handles an empty array', function() {
    expect(utils.<span class="apidocCodeKeywordSpan">arrayToObject</span>([])).to.deep.equal({});
  });
  it('handles an array of integers', function() {
    var arr = [1, 3];
    expect(utils.arrayToObject(arr)).to.deep.equal({'0': 1, '1': 3});
  });
  it('ignores passes non-array data through', function() {
    var arr = '3';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.getDataFromArgs" id="apidoc.element.stripe.utils.getDataFromArgs">
        function <span class="apidocSignatureSpan">stripe.utils.</span>getDataFromArgs
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDataFromArgs = function (args) {
  if (args.length &gt; 0) {
    if (isPlainObject(args[0]) &amp;&amp; !utils.isOptionsHash(args[0])) {
      return args.shift();
    }
  }
  return {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    reject(err);
    return;
  }

  urlData[param] = args.shift();
}

var data = encode(utils.<span class="apidocCodeKeywordSpan">getDataFromArgs</span>(args));
var opts = utils.getOptionsFromArgs(args);

if (args.length) {
  var path = this.createResourcePathWithSymbols(spec.path);
  var err = new Error(
    'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
    'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.getOptionsFromArgs" id="apidoc.element.stripe.utils.getOptionsFromArgs">
        function <span class="apidocSignatureSpan">stripe.utils.</span>getOptionsFromArgs
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOptionsFromArgs = function (args) {
  var opts = {
    auth: null,
    headers: {},
  }
  if (args.length &gt; 0) {
    var arg = args[args.length - 1];
    if (utils.isAuthKey(arg)) {
      opts.auth = args.pop();
    } else if (utils.isOptionsHash(arg)) {
      var params = args.pop();
      if (params.api_key) {
        opts.auth = params.api_key;
      }
      if (params.idempotency_key) {
        opts.headers['Idempotency-Key'] = params.idempotency_key;
      }
      if (params.stripe_account) {
        opts.headers['Stripe-Account'] = params.stripe_account;
      }
    }
  }
  return opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return;
  }

  urlData[param] = args.shift();
}

var data = encode(utils.getDataFromArgs(args));
var opts = utils.<span class="apidocCodeKeywordSpan">getOptionsFromArgs</span>(args);

if (args.length) {
  var path = this.createResourcePathWithSymbols(spec.path);
  var err = new Error(
    'Stripe: Unknown arguments (' + args + '). Did you mean to pass an options ' +
    'object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.' +
    ' (on API request to ' + requestMethod + ' `' + path + '`)'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.isAuthKey" id="apidoc.element.stripe.utils.isAuthKey">
        function <span class="apidocSignatureSpan">stripe.utils.</span>isAuthKey
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isAuthKey = function (key) {
  return typeof key == 'string' &amp;&amp; /^(?:[a-z]{2}_)?[A-z0-9]{32}$/.test(key);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  getOptionsFromArgs: function(args) {
var opts = {
  auth: null,
  headers: {},
}
if (args.length &gt; 0) {
  var arg = args[args.length - 1];
  if (utils.<span class="apidocCodeKeywordSpan">isAuthKey</span>(arg)) {
    opts.auth = args.pop();
  } else if (utils.isOptionsHash(arg)) {
    var params = args.pop();
    if (params.api_key) {
      opts.auth = params.api_key;
    }
    if (params.idempotency_key) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.isOptionsHash" id="apidoc.element.stripe.utils.isOptionsHash">
        function <span class="apidocSignatureSpan">stripe.utils.</span>isOptionsHash
        <span class="apidocSignatureSpan">(o)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isOptionsHash = function (o) {
  return isPlainObject(o) &amp;&amp; ['api_key', 'idempotency_key', 'stripe_account'].some(function(key) {
    return o.hasOwnProperty(key);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}()),

/**
 * Return the data argument from a list of arguments
 */
getDataFromArgs: function(args) {
  if (args.length &gt; 0) {
    if (isPlainObject(args[0]) &amp;&amp; !utils.<span class="apidocCodeKeywordSpan">isOptionsHash</span>(args[0])) {
      return args.shift();
    }
  }
  return {};
},

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.makeURLInterpolator" id="apidoc.element.stripe.utils.makeURLInterpolator">
        function <span class="apidocSignatureSpan">stripe.utils.</span>makeURLInterpolator
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeURLInterpolator(str) {
  var cleanString = str.replace(/["\n\r\u2028\u2029]/g, function($0) {
    return rc[$0];
  });
  return function(outputs) {
    return cleanString.replace(/\{([\s\S]+?)\}/g, function($0, $1) {
      return encodeURIComponent(outputs[$1] || '');
    });
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *  optionally passed through a hash (Object) as the penultimate argument
 *  (preceding the also-optional callback argument
* @param [spec.encode] Function for mutating input parameters to a method.
 *  Usefully for applying transforms to data on a per-method basis.
 */
function stripeMethod(spec) {
var commandPath = typeof spec.path == 'function' ? spec.path
                : utils.<span class="apidocCodeKeywordSpan">makeURLInterpolator</span>(spec.path || '');
var requestMethod = (spec.method || 'GET').toUpperCase();
var urlParams = spec.urlParams || [];
var encode = spec.encode || function(data) {return data;};

return function() {
  var self = this;
  var args = [].slice.call(arguments);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.protoExtend" id="apidoc.element.stripe.utils.protoExtend">
        function <span class="apidocSignatureSpan">stripe.utils.</span>protoExtend
        <span class="apidocSignatureSpan">(sub)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">protoExtend = function (sub) {
  var Super = this;
  var Constructor = hasOwn.call(sub, 'constructor') ? sub.constructor : function() {
    Super.apply(this, arguments);
  };
  Constructor.prototype = Object.create(Super.prototype);
  for (var i in sub) {
    if (hasOwn.call(sub, i)) {
      Constructor.prototype[i] = sub[i];
    }
  }
  for (i in Super) {
    if (hasOwn.call(Super, i)) {
      Constructor[i] = Super[i];
    }
  }
  return Constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stripe.utils.stringifyRequestData" id="apidoc.element.stripe.utils.stringifyRequestData">
        function <span class="apidocSignatureSpan">stripe.utils.</span>stringifyRequestData
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stringifyRequestData = function (data) {
  return qs.stringify(data, {arrayFormat: 'brackets'});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  _request: function(method, path, data, auth, options, callback) {
var self = this;
var requestData;

if (self.requestDataProcessor) {
  requestData = self.requestDataProcessor(method, data, options.headers);
} else {
  requestData = utils.<span class="apidocCodeKeywordSpan">stringifyRequestData</span>(data || {});
}

var apiVersion = this._stripe.getApiField('version');

var headers = {
  // Use specified auth token or use default from this stripe instance:
  'Authorization': auth ?
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>